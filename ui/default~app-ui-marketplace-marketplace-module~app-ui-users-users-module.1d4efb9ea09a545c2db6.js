(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"/QoZ":function(e,t,i){"use strict";i.d(t,"a",(function(){return Pe})),i.d(t,"b",(function(){return xe}));var s=i("XDzf"),n=i("oWwz"),a=i("dt5f"),r=i("a/z7"),o=i("xdKd"),c=i("tAww"),l=i("rCAV"),u=i("ObUu"),h=i("c/3O"),g=i("Ewue"),b=i("Jc6/"),m=i("3LNl"),p=i("tzq7"),f=i("u1E5"),d=i("Pm8L"),v=i("QH++"),w=i("2Vo4"),A=i("fXoL"),y=i("3qho"),P=i("ofXK"),x=i("I0FJ"),I=i("eNTF"),S=i("Kiu2"),T=i("JFlR"),k=i("Ls5z"),L=i("H4pW"),F=i("nznZ"),O=i("tyNb"),E=i("vOpc"),R=i("sifq"),B=i("5Wk5"),D=i("BUNh"),N=i("yL40"),C=i("I9hm");function U(e,t){1&e&&A.Mb(0)}const Q=function(e){return{$implicit:e}};function $(e,t){if(1&e&&(A.Ob(0),A.Bc(1,U,1,0,"ng-container",20),A.Nb()),2&e){const e=t.$implicit;A.Zb(4);const i=A.qc(4);A.xb(1),A.gc("ngTemplateOutlet",i)("ngTemplateOutletContext",A.jc(2,Q,e))}}function Z(e,t){if(1&e&&(A.Qb(0,"div",18),A.Qb(1,"h2",19),A.Dc(2),A.Pb(),A.Bc(3,$,2,4,"ng-container",14),A.Pb()),2&e){const e=A.Zb(3);A.xb(2),A.Ec(e.i18n.user.profile.banking),A.xb(1),A.gc("ngForOf",e.bankingActions)}}function M(e,t){1&e&&A.Mb(0)}function z(e,t){if(1&e&&(A.Ob(0),A.Bc(1,M,1,0,"ng-container",20),A.Nb()),2&e){const e=t.$implicit;A.Zb(4);const i=A.qc(4);A.xb(1),A.gc("ngTemplateOutlet",i)("ngTemplateOutletContext",A.jc(2,Q,e))}}function V(e,t){if(1&e&&(A.Qb(0,"div",18),A.Qb(1,"h2",19),A.Dc(2),A.Pb(),A.Bc(3,z,2,4,"ng-container",14),A.Pb()),2&e){const e=A.Zb(3);A.xb(2),A.Ec(e.i18n.user.profile.management),A.xb(1),A.gc("ngForOf",e.managementActions)}}function H(e,t){if(1&e&&(A.Ob(0),A.Qb(1,"div",16),A.Bc(2,Z,4,2,"div",17),A.Bc(3,V,4,2,"div",17),A.Pb(),A.Lb(4,"hr"),A.Nb()),2&e){const e=A.Zb(2);A.xb(2),A.gc("ngIf",e.bankingActions.length>0),A.xb(1),A.gc("ngIf",e.managementActions.length>0)}}function q(e,t){if(1&e&&A.Lb(0,"profile-images",21),2&e){const e=A.Zb(2);A.gc("image",e.user.image)("additionalImages",e.user.additionalImages)}}function K(e,t){if(1&e&&A.Lb(0,"profile-images",22),2&e){const e=A.Zb(2);A.gc("image",e.user.image)("additionalImages",e.user.additionalImages)("icon",e.SvgIcon.PersonCircle)}}function W(e,t){if(1&e&&(A.Qb(0,"label-value",23),A.Lb(1,"user-link",24),A.Pb()),2&e){const e=A.Zb(2);A.gc("label",e.i18n.user.operatorOwner),A.xb(1),A.gc("user",e.user.user)}}function _(e,t){if(1&e&&A.Lb(0,"label-value",25),2&e){const e=A.Zb(2);A.gc("label",e.i18n.user.groupSet)("value",e.user.groupSet.name)}}function G(e,t){if(1&e&&A.Lb(0,"label-value",25),2&e){const e=A.Zb(2);A.gc("label",e.i18n.user.group)("value",e.user.group.name)}}function j(e,t){if(1&e&&A.Lb(0,"label-value",25),2&e){const e=A.Zb(2);A.gc("label",e.i18n.general.status)("value",e.userHelper.userStatus(e.user.status))}}function Y(e,t){if(1&e&&A.Lb(0,"label-value",25),2&e){const e=A.Zb(2);A.gc("label",e.i18n.user.name)("value",e.user.name)}}function J(e,t){if(1&e&&A.Lb(0,"label-value",25),2&e){const e=A.Zb(2);A.gc("label",e.i18n.user.username)("value",e.user.username)}}function X(e,t){if(1&e&&(A.Lb(0,"label-value",25),A.ac(1,"date")),2&e){const e=A.Zb(2);A.gc("label",e.i18n.user.registrationDate)("value",A.bc(1,2,e.user.registrationDate))}}function ee(e,t){if(1&e&&(A.Lb(0,"label-value",25),A.ac(1,"date")),2&e){const e=A.Zb(2);A.gc("label",e.i18n.user.activationDate)("value",A.bc(1,2,e.user.activationDate))}}function te(e,t){if(1&e&&(A.Qb(0,"label-value",23),A.Qb(1,"a",26),A.Lb(2,"icon",27),A.Qb(3,"span"),A.Dc(4),A.Pb(),A.Pb(),A.Pb()),2&e){const e=A.Zb(2);A.gc("label",e.i18n.user.email),A.xb(1),A.gc("href","mailto:"+e.user.email,A.uc),A.xb(1),A.gc("icon",e.SvgIcon.Envelope),A.xb(2),A.Ec(e.user.email)}}function ie(e,t){if(1&e&&(A.Qb(0,"label-value",23),A.Qb(1,"a",26),A.Lb(2,"icon",27),A.Qb(3,"span"),A.Dc(4),A.Pb(),A.Pb(),A.Pb()),2&e){const e=A.Zb(2);A.gc("label",e.i18n.phone.mobile),A.xb(1),A.gc("href","tel:"+e.mobilePhone.normalizedNumber,A.uc),A.xb(1),A.gc("icon",e.SvgIcon.Phone),A.xb(2),A.Ec(e.mobilePhone.number)}}function se(e,t){if(1&e&&(A.Qb(0,"label-value",23),A.Qb(1,"a",26),A.Lb(2,"icon",27),A.Qb(3,"span"),A.Dc(4),A.Pb(),A.Pb(),A.Pb()),2&e){const e=t.$implicit,i=A.Zb(2);A.gc("label",e.name),A.xb(1),A.gc("href","tel:"+e.normalizedNumber,A.uc),A.xb(1),A.gc("icon",i.SvgIcon.Phone),A.xb(2),A.Ec(e.number)}}function ne(e,t){if(1&e&&(A.Qb(0,"label-value",23),A.Qb(1,"a",26),A.Lb(2,"icon",27),A.Qb(3,"span"),A.Dc(4),A.Pb(),A.Pb(),A.Pb()),2&e){const e=A.Zb(2);A.gc("label",e.i18n.phone.landLine),A.xb(1),A.gc("href","tel:"+e.landLinePhone.normalizedNumber,A.uc),A.xb(1),A.gc("icon",e.SvgIcon.Telephone),A.xb(2),A.Ec(e.landLinePhone.number)}}function ae(e,t){if(1&e&&(A.Qb(0,"label-value",23),A.Qb(1,"a",26),A.Lb(2,"icon",27),A.Qb(3,"span"),A.Dc(4),A.Pb(),A.Pb(),A.Pb()),2&e){const e=t.$implicit,i=A.Zb(2);A.gc("label",e.name),A.xb(1),A.gc("href","tel:"+e.normalizedNumber,A.uc),A.xb(1),A.gc("icon",i.SvgIcon.Telephone),A.xb(2),A.Ec(e.number)}}function re(e,t){1&e&&A.Lb(0,"custom-field-value",28),2&e&&A.gc("fieldValue",t.$implicit)}function oe(e,t){if(1&e&&(A.Qb(0,"h3",29),A.Dc(1),A.Pb()),2&e){const e=A.Zb(2);A.xb(1),A.Fc(" ",e.i18n.user.activities,"")}}function ce(e,t){if(1&e&&A.Lb(0,"label-value",25),2&e){const e=A.Zb(2);A.gc("label",e.i18n.user.connectionStatus)("value",e.i18n.user.connected)}}function le(e,t){if(1&e&&A.Lb(0,"label-value",25),2&e){const e=A.Zb(2);A.gc("label",e.i18n.user.connectionStatus)("value",e.i18n.user.disconnectedStatus(e.format.formatAsDateTime(e.data.lastLogin)))}}function ue(e,t){if(1&e&&A.Lb(0,"label-value",25),2&e){const e=A.Zb(2);A.gc("label",e.i18n.user.connectionStatus)("value",e.i18n.user.neverLogged)}}function he(e,t){if(1&e&&(A.Ob(0),A.Qb(1,"label-value",23),A.Dc(2),A.ac(3,"currency"),A.Pb(),A.Nb()),2&e){const e=t.$implicit,i=A.Zb(2);A.xb(1),A.gc("label",i.i18n.user.accountBalance(e.type.name)),A.xb(1),A.Fc(" ",A.cc(3,2,e.status.balance,e.currency)," ")}}function ge(e,t){if(1&e&&A.Lb(0,"rating-stats",32),2&e){const e=A.Zb(3);A.gc("score",e.data.references.score)("textRight",e.data.references.count>1?e.i18n.reference.count.multi(e.data.references.count):e.i18n.reference.count.single)}}function be(e,t){if(1&e&&(A.Ob(0),A.Dc(1),A.Nb()),2&e){const e=A.Zb(3);A.xb(1),A.Fc(" ",e.i18n.reference.notGiven,"")}}function me(e,t){if(1&e&&(A.Qb(0,"label-value",23),A.Qb(1,"a",30),A.Bc(2,ge,1,2,"rating-stats",31),A.Bc(3,be,2,1,"ng-container",4),A.Pb(),A.Pb()),2&e){const e=A.Zb(2);A.gc("label",e.i18n.user.profile.references),A.xb(1),A.gc("routerLink",e.referencesPath()),A.xb(1),A.gc("ngIf",e.data.references.count>0),A.xb(1),A.gc("ngIf",0===e.data.references.count)}}function pe(e,t){if(1&e&&(A.Qb(0,"a",40),A.Dc(1),A.Pb()),2&e){const e=A.Zb().$implicit;A.gc("href","mailto:"+e.email,A.uc),A.xb(1),A.Fc(" ",e.email," ")}}function fe(e,t){if(1&e&&(A.Qb(0,"div"),A.Lb(1,"format-field-value",28),A.Pb()),2&e){const e=t.$implicit;A.xb(1),A.gc("fieldValue",e)}}function de(e,t){if(1&e&&(A.Qb(0,"div",42),A.Qb(1,"span",43),A.Dc(2),A.Pb(),A.Dc(3),A.Pb()),2&e){const e=A.Zb().$implicit,t=A.Zb(3);A.xb(2),A.Ec(t.i18n.user.contactInfoAtAddress),A.xb(1),A.Fc(" ",e.address.name," ")}}function ve(e,t){if(1&e&&(A.Qb(0,"div",36),A.Lb(1,"avatar",37),A.Qb(2,"div",38),A.Dc(3),A.Pb(),A.Bc(4,pe,2,2,"a",39),A.Qb(5,"a",40),A.Dc(6),A.Pb(),A.Qb(7,"a",40),A.Dc(8),A.Pb(),A.Bc(9,fe,2,1,"div",14),A.Bc(10,de,4,2,"div",41),A.Pb()),2&e){const e=t.$implicit;A.xb(1),A.gc("image",e.image),A.xb(2),A.Ec(e.name),A.xb(1),A.gc("ngIf",e.email),A.xb(1),A.gc("href","tel:"+e.normalizedMobilePhone,A.uc),A.xb(1),A.Fc(" ",e.mobilePhone," "),A.xb(1),A.gc("href","tel:"+e.normalizedLandLinePhone,A.uc),A.xb(1),A.Fc(" ",e.landLinePhone," "),A.xb(1),A.gc("ngForOf",e.customValues),A.xb(1),A.gc("ngIf",e.address)}}function we(e,t){if(1&e&&(A.Ob(0),A.Qb(1,"h2",33),A.Dc(2),A.Pb(),A.Qb(3,"div",34),A.Bc(4,ve,11,9,"div",35),A.Pb(),A.Nb()),2&e){const e=A.Zb(2);A.xb(2),A.Ec(e.i18n.user.contactInfo),A.xb(2),A.gc("ngForOf",e.user.contactInfos)}}function Ae(e,t){if(1&e&&(A.Qb(0,"page-content",3),A.ac(1,"async"),A.Bc(2,H,5,2,"ng-container",4),A.ac(3,"async"),A.Bc(4,q,1,2,"profile-images",5),A.ac(5,"async"),A.Qb(6,"div",6),A.Bc(7,K,1,3,"profile-images",7),A.ac(8,"async"),A.Qb(9,"div",8),A.Bc(10,W,2,2,"label-value",9),A.Bc(11,_,1,2,"label-value",10),A.Bc(12,G,1,2,"label-value",10),A.Bc(13,j,1,2,"label-value",10),A.Bc(14,Y,1,2,"label-value",10),A.Bc(15,J,1,2,"label-value",10),A.Bc(16,X,2,4,"label-value",10),A.Bc(17,ee,2,4,"label-value",10),A.Bc(18,te,5,4,"label-value",9),A.Bc(19,ie,5,4,"label-value",9),A.Bc(20,se,5,4,"label-value",11),A.Bc(21,ne,5,4,"label-value",9),A.Bc(22,ae,5,4,"label-value",11),A.Bc(23,re,1,1,"custom-field-value",12),A.Bc(24,oe,2,1,"h3",13),A.Bc(25,ce,1,2,"label-value",10),A.Bc(26,le,1,2,"label-value",10),A.Bc(27,ue,1,2,"label-value",10),A.Bc(28,he,4,5,"ng-container",14),A.Bc(29,me,4,4,"label-value",9),A.Pb(),A.Pb(),A.Qb(30,"div",8),A.Lb(31,"profile-addresses",15),A.Bc(32,we,5,2,"ng-container",4),A.Pb(),A.Pb()),2&e){const e=A.Zb();A.gc("heading",e.title)("mobileHeading",e.mobileTitle)("headingActions",A.bc(1,28,e.headingActions$)),A.xb(2),A.gc("ngIf",A.bc(3,30,e.showActions$)),A.xb(2),A.gc("ngIf",e.imageEnabled&&e.user.image&&A.bc(5,32,e.layout.ltsm$)),A.xb(3),A.gc("ngIf",e.imageEnabled&&A.bc(8,34,e.layout.gtxs$)),A.xb(3),A.gc("ngIf",e.showOperatorOwner),A.xb(1),A.gc("ngIf",e.user.groupSet),A.xb(1),A.gc("ngIf",e.user.group),A.xb(1),A.gc("ngIf",e.user.status),A.xb(1),A.gc("ngIf",e.user.name),A.xb(1),A.gc("ngIf",e.user.username),A.xb(1),A.gc("ngIf",e.user.registrationDate),A.xb(1),A.gc("ngIf",e.showActivationDate),A.xb(1),A.gc("ngIf",e.user.email),A.xb(1),A.gc("ngIf",e.mobilePhone),A.xb(1),A.gc("ngForOf",e.mobilePhones),A.xb(1),A.gc("ngIf",e.landLinePhone),A.xb(1),A.gc("ngForOf",e.landLinePhones),A.xb(1),A.gc("ngForOf",e.user.customValues),A.xb(1),A.gc("ngIf",e.data.references||e.data.paymentFeedbacks||e.data.accounts.length>0||e.data.lastLogin||e.data.firstLogin||null!=e.data.online),A.xb(1),A.gc("ngIf",e.data.online),A.xb(1),A.gc("ngIf",e.data.lastLogin&&!e.data.online),A.xb(1),A.gc("ngIf",null==e.data.lastLogin&&null!=e.data.online),A.xb(1),A.gc("ngForOf",e.data.accounts),A.xb(1),A.gc("ngIf",e.data.references),A.xb(2),A.gc("addresses",e.user.addresses),A.xb(1),A.gc("ngIf",(null==e.user.contactInfos?null:e.user.contactInfos.length)>0)}}function ye(e,t){if(1&e&&(A.Qb(0,"div",44),A.Lb(1,"heading-action-button",45),A.Pb()),2&e){const e=t.$implicit;A.xb(1),A.gc("action",e)}}const Pe=25;let xe=(()=>{class e extends d.a{constructor(e,t,i,s,n,a,r,o,c){super(e),this.usersService=t,this.contactsService=i,this.operationHelper=s,this.wizardHelper=n,this.recordHelper=a,this.tokenHelper=r,this.maps=o,this.userHelper=c,this.showActions$=new w.a(!1),this.bankingActions=[],this.managementActions=[]}get user(){return this.data}ngOnInit(){super.ngOnInit(),this.stateManager.manageValue(this.showActions$,"showActions"),this.param=this.route.snapshot.params.user||l.a.SELF,this.errorHandler.requestWithCustomErrorHandler(e=>{this.addSub(this.usersService.viewUser({user:this.param}).subscribe(e=>{this.data=e},t=>{t.status===r.a.NOT_FOUND&&null==this.dataForFrontendHolder.user?this.login.goToLoginPage(this.router.url):[r.a.FORBIDDEN,r.a.UNAUTHORIZED].includes(t.status)?(this.notification.error(this.i18n.user.profile.noPermission),this.breadcrumb.back(),this.data={}):e(t)}))})}onDataInitialized(e){var t,i,n;this.shortName=Object(u.J)(e.name||e.display,Pe);const a=e.enabledProfileFields;this.imageEnabled=null==a||a.includes(s.i.IMAGE),this.mobilePhones=e.phones.filter(e=>e.type===s.eb.MOBILE),this.landLinePhones=e.phones.filter(e=>e.type===s.eb.LAND_LINE),1===this.mobilePhones.length&&(this.mobilePhone=this.mobilePhones[0],this.mobilePhones=[]),1===this.landLinePhones.length&&(this.landLinePhone=this.landLinePhones[0],this.landLinePhones=[]);const r=e.role===s.pb.OPERATOR,h=e.permissions||{},g=h.profile||{},b=h.passwords||{},m=h.identityProviders||{},p=(h.accounts||[]).map(e=>e.type),f=h.contact||{},d=h.payment||{},v=h.paymentRequests||{},w=h.scheduledPayments||{},A=h.authorizedPayments||{},y=h.marketplace||{},P=y.simple||{},x=y.webshop||{},I=h.notificationSettings||{},S=h.status||{},T=h.group||{},k=h.agreements||{},L=h.operators||{},F=h.brokering||{},O=h.vouchers||{},E=h.documents||{},R=h.tokens||[],B=h.products||{},D=[s.Pb.ADMINISTRATOR,s.Pb.BROKER,s.Pb.OWNER].includes(e.relationship);if(e.relationship===s.Pb.SELF){if(g.editProfile){const e=new c.c(o.a.Pencil,this.i18n.general.edit,()=>{this.router.navigateByUrl(this.router.url+"/edit")},!0);this.headingActions=[e]}}else{if(p.length>6)this.bankingActions.push(new c.c(o.a.Wallet2,this.i18n.user.profile.accountsSummary,()=>{this.router.navigate(["/banking",this.param,"accounts-summary"])}));else for(const e of p)this.bankingActions.push(new c.c(o.a.Wallet2,this.i18n.user.profile.viewAccount(e.name),()=>{this.router.navigate(["/banking",this.param,"account",l.a.internalNameOrId(e)])}));d.userToUser&&this.bankingActions.push(new c.c(o.a.Wallet2ArrowRight,this.i18n.user.profile.pay,()=>{this.router.navigate(["/banking",l.a.SELF,"payment",this.param])})),d.systemToUser&&this.bankingActions.push(new c.c(o.a.Wallet2ArrowRight,this.i18n.user.profile.paySystemToUser,()=>{this.router.navigate(["/banking",l.a.SYSTEM,"payment",this.param])})),d.asUserToUser&&this.bankingActions.push(new c.c(o.a.Wallet2ArrowRight,this.i18n.user.profile.payAsUserToUser,()=>{this.router.navigate(["/banking",this.param,"payment"])})),d.asUserToSelf&&this.bankingActions.push(new c.c(o.a.Wallet2ArrowLeftRight,this.i18n.user.profile.payAsUserToSelf,()=>{this.router.navigate(["/banking",this.param,"payment",l.a.SELF])})),d.asUserToSystem&&this.bankingActions.push(new c.c(o.a.Wallet2ArrowRight,this.i18n.user.profile.payAsUserToSystem,()=>{this.router.navigate(["/banking",this.param,"payment",l.a.SYSTEM])})),v.sendFromSystem&&this.bankingActions.push(new c.c(o.a.Wallet2ArrowLeft,this.i18n.user.profile.requestPaymentFromSystem,()=>{this.router.navigate(["/banking",l.a.SYSTEM,"payment-request",this.param])})),v.sendFromUser&&this.bankingActions.push(new c.c(o.a.Wallet2ArrowLeft,D?this.i18n.user.profile.requestPaymentFromUser:this.i18n.user.profile.requestPayment,()=>{this.router.navigate(["/banking",l.a.SELF,"payment-request",this.param])})),v.sendAsUserToUser&&this.bankingActions.push(new c.c(o.a.Wallet2ArrowLeft,this.i18n.user.profile.requestPaymentAsUserFromUser,()=>{this.router.navigate(["/banking",this.param,"payment-request"])})),v.sendAsUserToSystem&&this.bankingActions.push(new c.c(o.a.Wallet2ArrowLeft,this.i18n.user.profile.requestPaymentAsUserFromSystem,()=>{this.router.navigate(["/banking",this.param,"payment-request",l.a.SYSTEM])})),v.view&&this.bankingActions.push(new c.c(o.a.Wallet2ArrowLeft,this.i18n.user.profile.viewPaymentRequests,()=>{this.router.navigate(["/banking",this.param,"payment-requests"])})),w.view&&this.bankingActions.push(new c.c(o.a.Clock,this.i18n.user.profile.viewScheduledPayments,()=>{this.router.navigate(["/banking",this.param,"installments"])})),(h.balanceLimits||{}).view&&this.bankingActions.push(new c.c(o.a.ArrowDownUp,this.i18n.user.profile.accountsBalanceLimits,()=>{this.router.navigate(["/banking",this.param,"account-balance-limits"])})),(h.paymentLimits||{}).view&&this.bankingActions.push(new c.c(o.a.ArrowDownUp,this.i18n.user.profile.accountsPaymentLimits,()=>{this.router.navigate(["/banking",this.param,"account-payment-limits"])})),A.view&&this.bankingActions.push(new c.c(o.a.CheckCircle,this.i18n.user.profile.viewAuthorizedPayments,()=>{this.router.navigate(["/banking",this.param,"authorized-payments"])})),O.viewBought&&this.bankingActions.push(new c.c(o.a.Ticket,this.i18n.user.profile.viewBoughtVouchers,()=>{this.router.navigate(["/banking",this.param,"vouchers","bought"])})),O.buy&&this.bankingActions.push(new c.c(o.a.Ticket,this.i18n.user.profile.buyVouchers,()=>{this.router.navigate(["/banking",this.param,"vouchers","buy"])})),O.viewRedeemed&&this.bankingActions.push(new c.c(o.a.Ticket,this.i18n.user.profile.viewRedeemedVouchers,()=>{this.router.navigate(["/banking",this.param,"vouchers","redeemed"])})),O.redeem&&this.bankingActions.push(new c.c(o.a.Ticket,this.i18n.user.profile.redeemVoucher,()=>{this.router.navigate(["/banking",this.param,"vouchers","redeem"])})),g.editProfile&&this.managementActions.push(new c.c(o.a.Pencil,this.i18n.user.profile.edit,()=>{this.router.navigateByUrl(this.router.url+"/edit")})),b.manage&&this.managementActions.push(new c.c(o.a.Key,this.i18n.user.profile.managePasswords,()=>{this.router.navigate(["/users",this.param,"passwords"])})),m.view&&this.managementActions.push(new c.c(o.a.PersonBadge,this.i18n.user.profile.viewIdentityProviders,()=>{this.router.navigate(["/users",this.param,"identity-providers"])})),S.view&&this.managementActions.push(new c.c(o.a.PersonCheck,r?this.i18n.user.profile.statusOperator:this.i18n.user.profile.statusUser,()=>{this.router.navigate(["/users",this.param,"status"])})),T.view&&this.managementActions.push(new c.c(o.a.People,r?this.i18n.user.profile.groupOperator:this.i18n.user.profile.groupUser,()=>{this.router.navigate(["/users",this.param,"group"])})),k.view&&this.managementActions.push(new c.c(o.a.UiChecks,this.i18n.user.profile.agreements,()=>{this.router.navigate(["/users",this.param,"agreements"])})),F.viewMembers&&this.managementActions.push(new c.c(o.a.PersonSquareOutline,this.i18n.user.profile.viewBrokerings,()=>{this.router.navigate(["/users",this.param,"brokerings"])})),F.viewBrokers&&this.managementActions.push(new c.c(o.a.PersonSquareOutline,this.i18n.user.profile.viewBrokers,()=>{this.router.navigate(["/users",this.param,"brokers"])})),L.viewOperators&&this.managementActions.push(new c.c(o.a.PersonCircleOutline,this.i18n.user.profile.viewOperators,()=>{this.router.navigate(["/users",this.param,"operators"])})),B.view&&this.managementActions.push(new c.c(o.a.Shield,this.i18n.user.profile.products,()=>{this.router.navigate(["/users",this.param,"product-assignment"])})),f.add&&this.managementActions.push(new c.c(o.a.PersonPlus,this.i18n.user.profile.addContact,()=>{this.addContact()})),f.remove&&this.managementActions.push(new c.c(o.a.PersonDash,this.i18n.user.profile.removeContact,()=>{this.removeContact()})),P.view&&this.managementActions.push(new c.c(o.a.Basket,this.i18n.user.profile.viewAds,()=>{this.router.navigate(["/marketplace",this.param,s.c.SIMPLE,"list"])})),x.view&&this.managementActions.push(new c.c(o.a.Basket,this.i18n.user.profile.viewWebshop,()=>{this.router.navigate(["/marketplace",this.param,s.c.WEBSHOP,"list"])})),x.viewPurchases&&this.managementActions.push(new c.c(o.a.Cart3,this.i18n.user.profile.purchases,()=>{this.router.navigate(["/marketplace",this.param,"purchases"])})),x.viewSales&&this.managementActions.push(new c.c(o.a.Receipt,this.i18n.user.profile.sales,()=>{this.router.navigate(["/marketplace",this.param,"sales"])})),y.viewInterests&&this.managementActions.push(new c.c(o.a.Star,this.i18n.user.profile.adInterests,()=>{this.router.navigate(["/marketplace",this.param,"ad-interests"])})),x.viewSettings&&(this.managementActions.push(new c.c(o.a.Truck,this.i18n.user.profile.deliveryMethods,()=>{this.router.navigate(["/marketplace",this.param,"delivery-methods"])})),this.managementActions.push(new c.c(o.a.Gear,this.i18n.user.profile.webshopSettings,()=>{this.router.navigate(["/marketplace",this.param,"webshop-settings","view"])})));for(const e of R)this.managementActions.push(new c.c(this.tokenHelper.icon(e.type),e.type.pluralName,()=>{this.router.navigate(["/users",this.param,"tokens",e.type.id])}));I.view&&this.managementActions.push(new c.c(o.a.BellSlash,this.i18n.user.profile.notificationSettings,()=>{this.router.navigate(["/users",this.param,"notification-settings"])})),(null===(t=h.privacySettings)||void 0===t?void 0:t.view)&&this.managementActions.push(new c.c(o.a.EyeSlash,this.i18n.user.profile.privacySettings,()=>{this.router.navigate(["/users",this.param,"privacy-settings"])})),(null===(i=h.references)||void 0===i?void 0:i.view)&&this.managementActions.push(new c.c(o.a.Star,this.i18n.user.profile.references,()=>{this.router.navigate(["/users",this.param,"references","search"])})),E.view&&this.managementActions.push(new c.c(o.a.FileEarmarkText,this.i18n.document.action(null===(n=e.documents)||void 0===n?void 0:n.count),()=>{this.router.navigate(["/users",this.param,"documents","search"])}));for(const t of h.records||[]){const i=t.type,n=i.userProfileSection===s.Nb.BANKING?this.bankingActions:this.managementActions,a=this.recordHelper.icon(i),r=e.records[i.id]||e.records[i.internalName];n.push(new c.c(a,this.i18n.record.action({type:i.pluralName,count:null==r?void 0:r.count}),()=>{this.router.navigateByUrl(this.recordHelper.resolvePath(t,this.param))}))}for(const t of h.operations||[])(t.userProfileSection===s.Nb.BANKING?this.bankingActions:this.managementActions).push(this.operationHelper.headingAction(t,e.id));for(const t of h.wizards||[])(t.userProfileSection===s.Nb.BANKING?this.bankingActions:this.managementActions).push(this.wizardHelper.headingAction(t,e.id));this.bankingActions.length+this.managementActions.length>0&&(D?this.updateHeadingActions():this.headingActions=[...this.bankingActions,...this.managementActions])}}referencesPath(){return["/users",this.param,"references","search"]}updateHeadingActions(){const e=!this.showActions$.value,t=new c.c(e?o.a.FilePlay:o.a.FileX,e?this.i18n.user.profile.showActions:this.i18n.user.profile.hideActions,()=>{this.showActions$.next(e),this.updateHeadingActions()},!0);this.headingActions=[t]}addContact(){this.addSub(this.contactsService.createContact({user:l.a.SELF,body:{contact:this.user.id}}).subscribe(()=>{this.notification.snackBar(this.i18n.user.profile.addContactDone(this.shortName)),this.reload()}))}removeContact(){this.addSub(this.contactsService.deleteContact({id:this.user.contact.id}).subscribe(()=>{this.notification.snackBar(this.i18n.user.profile.removeContactDone(this.shortName)),this.reload()}))}get myProfile(){return!!this.user&&(this.login.user||{}).id===this.user.id}get title(){return this.myProfile?this.i18n.user.title.myProfile:this.shortName}get mobileTitle(){return this.myProfile?this.i18n.user.mobileTitle.myProfile:this.i18n.user.mobileTitle.userProfile}get showActivationDate(){return this.user.activationDate&&this.format.formatAsDate(this.user.activationDate)!==this.format.formatAsDate(this.user.registrationDate)}get showOperatorOwner(){return this.user.role===s.pb.OPERATOR&&![s.Pb.OWNER,s.Pb.SAME_OWNER].includes(this.user.relationship)}resolveMenu(e){switch(e.relationship){case s.Pb.OWNER:case s.Pb.SAME_OWNER:return v.b.MY_OPERATORS;case s.Pb.BROKER:return v.b.MY_BROKERED_USERS;default:return this.login.user?v.b.SEARCH_USERS:v.b.PUBLIC_DIRECTORY}}}return e.\u0275fac=function(t){return new(t||e)(A.Kb(A.r),A.Kb(a.a),A.Kb(n.a),A.Kb(g.a),A.Kb(f.a),A.Kb(b.a),A.Kb(m.a),A.Kb(h.a),A.Kb(p.a))},e.\u0275cmp=A.Eb({type:e,selectors:[["view-profile"]],features:[A.ub],decls:5,vars:4,consts:[[3,"ready"],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions",4,"ngIf"],["actionTpl",""],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions"],[4,"ngIf"],[3,"image","additionalImages",4,"ngIf"],[1,"d-flex","flex-row-reverse"],[3,"image","additionalImages","icon",4,"ngIf"],[1,"d-flex","flex-grow-1","flex-column"],[3,"label",4,"ngIf"],[3,"label","value",4,"ngIf"],[3,"label",4,"ngFor","ngForOf"],[3,"fieldValue",4,"ngFor","ngForOf"],["class","mb-1",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"addresses"],[1,"row","no-gutters"],["class","col-12 col-sm-6",4,"ngIf"],[1,"col-12","col-sm-6"],[1,"border-0","mb-2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"image","additionalImages"],[3,"image","additionalImages","icon"],[3,"label"],[3,"user"],[3,"label","value"],[1,"link-with-icon",3,"href"],[3,"icon"],[3,"fieldValue"],[1,"mb-1"],[3,"routerLink"],[3,"score","textRight",4,"ngIf"],[3,"score","textRight"],[1,"mt-3"],[1,"additional-contacts","row","no-gutters"],["class","text-center col-12 col-sm-6 col-md-4 col-lg-3 pb-3",4,"ngFor","ngForOf"],[1,"text-center","col-12","col-sm-6","col-md-4","col-lg-3","pb-3"],["size","140","useLightbox","",1,"mb-2",3,"image"],[1,"font-weight-bold"],["class","d-block",3,"href",4,"ngIf"],[1,"d-block",3,"href"],["class","text-accent",4,"ngIf"],[1,"text-accent"],[1,"inline-label"],[1,"profile-action"],[1,"heading-action-button",3,"action"]],template:function(e,t){1&e&&(A.Qb(0,"page-layout",0),A.ac(1,"async"),A.Bc(2,Ae,33,36,"page-content",1),A.Pb(),A.Bc(3,ye,2,1,"ng-template",null,2,A.Cc)),2&e&&(A.gc("ready",A.bc(1,2,t.data$)),A.xb(2),A.gc("ngIf",t.data))},directives:[y.a,P.t,x.a,P.s,I.a,P.A,S.a,T.a,k.a,L.a,F.a,O.h,E.a,R.a,B.a,D.a],pipes:[P.b,N.a,C.a],encapsulation:2,changeDetection:0}),e})()},v4xg:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var s=i("3Pt+"),n=i("mwYl"),a=i("tAww"),r=i("rCAV"),o=i("uuU0"),c=i("Ky6R"),l=i("TFmz"),u=i("Muja"),h=i("2Vo4"),g=i("Kj3r"),b=i("xdKd"),m=i("fXoL");let p=(()=>{class e extends o.a{constructor(e){super(e),this.ResultType=l.a,this.resultType$=new h.a(null),this.resultTypeControl=new s.j(null),this.results$=new h.a(null),this.allowedResultTypes$=new h.a([l.a.LIST]),this.rendering$=new h.a(!1),this.moreFilters$=new h.a(!1),this.ignoreNextUpdate=!1,this.nextRequestState=e.get(n.a);const t={page:0};t.resultType=this.getInitialResultType();for(const i of this.getFormControlNames()||[])t[i]=null;this.form=this.formBuilder.group(t)}getInitialFormValue(e){return e.query||{}}onDataInitialized(e){this.form.patchValue(this.getInitialFormValue(e)),this.stateManager.manage(this.form),this.stateManager.manage(this.resultTypeControl,"resultType"),this.stateManager.manageValue(this.moreFilters$,"moreFilters"),this.previousValue=this.form.value,this.previousResultType=this.resultType,this.resultType$.next(this.previousResultType),this.addSub(this.resultTypeControl.valueChanges.subscribe(e=>{const t=this.previousResultType;this.previousResultType=e,this.resultType$.next(e),this.shouldUpdateOnResultTypeChange(e,t)&&this.update(),null!=t&&t===e||(this.rendering=!0,this.stateManager.set("resultType",e),this.onResultTypeChanged(e,t))})),setTimeout(()=>{this.addSub(this.form.valueChanges.pipe(Object(g.a)(r.a.DEBOUNCE_TIME)).subscribe(e=>{this.shouldUpdateOnChange(e)&&this.update(),this.previousValue=e}),!0),this.previousResultType!==l.a.CATEGORIES&&this.update()},1)}shouldUpdateOnResultTypeChange(e,t){return e!==l.a.CATEGORIES&&([l.a.LIST,l.a.TILES].includes(t)!==[l.a.LIST,l.a.TILES].includes(e)||t===l.a.MAP!=(e===l.a.MAP))}shouldUpdateOnChange(e){return!Object(u.a)(this.previousValue,e)}get results(){return this.results$.value}set results(e){this.onBeforeRender(e),this.results$.next(e)}onBeforeRender(e){}get rendering(){return this.rendering$.value}set rendering(e){this.rendering$.next(e)}get allowedResultTypes(){return this.allowedResultTypes$.value}set allowedResultTypes(e){this.allowedResultTypes$.next(e)}get moreFilters(){return this.moreFilters$.value}set moreFilters(e){this.moreFilters$.next(e)}get pageData(){const e=this.form.value;return{page:e.page,pageSize:e.pageSize}}set pageData(e){this.form.patchValue(e)}get resultType(){return this.resultTypeControl.value}set resultType(e){null==e&&(e=this.getInitialResultType()),this.resultTypeControl.setValue(e)}ngOnInit(){super.ngOnInit(),this.resultType=this.getInitialResultType()}get moreFiltersAction(){return this._moreFiltersAction||(this._moreFiltersAction=new a.c(this.showMoreFiltersIcon(),this.showMoreFiltersLabel(),()=>{this.moreFilters=!this.moreFilters,this._moreFiltersAction.icon=this.moreFilters?this.showLessFiltersIcon():this.showMoreFiltersIcon(),this._moreFiltersAction.label=this.moreFilters?this.showLessFiltersLabel():this.showMoreFiltersLabel()},!0),this._moreFiltersAction.breakpoint="gt-xxs",this._moreFiltersAction.maybeRoot=!0),this._moreFiltersAction}showMoreFiltersLabel(){return this.i18n.general.showMoreFilters}showLessFiltersLabel(){return this.i18n.general.showLessFilters}showMoreFiltersIcon(){return b.a.Funnel}showLessFiltersIcon(){return b.a.Funnel}onResultTypeChanged(e,t){}getInitialResultType(){return l.a.LIST}update(e){if(this.ignoreNextUpdate)return;e&&(this.form.patchValue(e,{emitEvent:!1}),this.stateManager.set("form",this.form.value)),this.rendering=!0,this.results=null,this.nextRequestState.leaveNotification=!0;const t=this.form.value;t.pageSize=this.uiLayout.searchPageSize,this.addSub(this.doSearch(this.toSearchParams(t)).subscribe(e=>{this.resultType===l.a.CATEGORIES&&(this.resultType=this.allowedResultTypes.find(e=>e!==l.a.CATEGORIES)),this.results=c.a.from(e)}))}resetPage(e=!1){this.form.patchValue({page:0},{emitEvent:e})}doIgnoringUpdate(e){this.ignoreNextUpdate=!0;try{e()}finally{this.ignoreNextUpdate=!1}}}return e.\u0275fac=function(t){return new(t||e)(m.Kb(m.r))},e.\u0275dir=m.Fb({type:e,features:[m.ub]}),e})()}}]);