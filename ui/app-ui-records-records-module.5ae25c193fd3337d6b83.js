(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"/Gkq":function(e,t,i){"use strict";i.r(t),i.d(t,"RecordsModule",(function(){return dt}));var n=i("tyNb"),a=i("IbW5"),s=i("XDzf"),o=i("LoRy"),r=i("Jc6/"),l=i("uuU0"),c=i("ObUu"),b=i("XIp8"),u=i("fXoL"),d=i("3qho"),f=i("ofXK"),g=i("I0FJ"),h=i("3Pt+"),p=i("UXR7"),m=i("OTwK"),v=i("s7Af"),y=i("AH7H"),x=i("JFlR"),P=i("Y+zs");function F(e,t){if(1&e&&(u.Ob(0),u.Lb(1,"user-info",9),u.Lb(2,"hr"),u.Nb()),2&e){const e=u.Zb(2);u.xb(1),u.gc("user",e.data.user)}}function I(e,t){1&e&&u.Lb(0,"hr",12)}function S(e,t){if(1&e&&(u.Ob(0),u.Lb(1,"rich-text-container",10),u.Bc(2,I,1,0,"hr",11),u.Nb()),2&e){const e=u.Zb(2);u.xb(1),u.gc("value",e.data.type.informationText),u.xb(1),u.gc("ngIf",e.data.fields)}}const w=function(e,t,i){return{"mb-0":e,"mb-2":t,"border-top-0":i}};function C(e,t){if(1&e&&(u.Qb(0,"h2",13),u.Dc(1),u.Pb()),2&e){const e=u.Zb(2);u.gc("ngClass",u.lc(2,w,"above"===e.labelPosition,"above"!==e.labelPosition,!e.data.type.informationText)),u.xb(1),u.Fc(" ",e.i18n.record.fields," ")}}function L(e,t){if(1&e&&(u.Qb(0,"label-value",14),u.Lb(1,"custom-field-input",15),u.Pb()),2&e){const e=t.$implicit,i=u.Zb(2);u.gc("label",e.name)("kind","field")("fieldSize",i.fieldSize(e))("required",e.required)("labelPosition",i.labelPosition)("ngClass",i.resolveColumnClass(e)),u.xb(1),u.gc("field",e)("binaryValues",i.binaryValues)("formControl",i.form.get("customValues").get(e.internalName))}}function O(e,t){if(1&e&&(u.Qb(0,"label-value",14),u.Lb(1,"custom-field-input",15),u.Pb()),2&e){const e=t.$implicit,i=u.Zb(3);u.gc("label",e.name)("kind","field")("fieldSize",i.fieldSize(e))("required",e.required)("labelPosition",i.labelPosition)("ngClass",i.resolveColumnClass(e)),u.xb(1),u.gc("field",e)("binaryValues",i.binaryValues)("formControl",i.form.get("customValues").get(e.internalName))}}const B=function(e,t,i,n){return{"mb-0":e,"mb-2":t,"mt-4":i,"border-top-0":n}};function T(e,t){if(1&e&&(u.Ob(0),u.Qb(1,"h2",13),u.Dc(2),u.Pb(),u.Bc(3,O,2,9,"label-value",6),u.Nb()),2&e){const e=t.$implicit,i=t.first,n=u.Zb(2);u.xb(1),u.gc("ngClass",u.mc(3,B,"above"===n.labelPosition,"above"!==n.labelPosition,n.fieldsWithoutSection.length>0,i&&0==n.fieldsWithoutSection.length)),u.xb(1),u.Fc(" ",e.name," "),u.xb(1),u.gc("ngForOf",n.fieldsWithSection.get(e))}}const Z=function(e){return{"mr-n3":e}};function R(e,t){if(1&e){const e=u.Rb();u.Qb(0,"page-content",2),u.Bc(1,F,3,1,"ng-container",3),u.Qb(2,"form",4),u.Bc(3,S,3,2,"ng-container",3),u.Bc(4,C,2,6,"h2",5),u.Bc(5,L,2,9,"label-value",6),u.Bc(6,T,4,8,"ng-container",7),u.Pb(),u.Qb(7,"actions"),u.Qb(8,"action-button",8),u.Xb("action",(function(){return u.sc(e),u.Zb().save()})),u.ac(9,"async"),u.Pb(),u.Pb(),u.Pb()}if(2&e){const e=u.Zb();u.gc("heading",e.create?e.i18n.record.title.new(e.data.type.name):e.i18n.record.title.edit(e.data.type.name))("mobileHeading",e.create?e.i18n.record.mobileTitle.new(e.data.type.name):e.i18n.record.mobileTitle.edit(e.data.type.name)),u.xb(1),u.gc("ngIf",e.data.user&&!e.authHelper.isSelf(e.data.user)),u.xb(1),u.gc("formGroup",e.form)("ngClass",u.jc(13,Z,e.columnLayout)),u.xb(1),u.gc("ngIf",e.data.type.informationText),u.xb(1),u.gc("ngIf",e.fieldsWithoutSection.length>0),u.xb(1),u.gc("ngForOf",e.fieldsWithoutSection),u.xb(1),u.gc("ngForOf",e.fieldsWithSection.keys()),u.xb(2),u.gc("disabled",u.bc(9,11,e.requesting$))("label",e.i18n.general.save)}}let D=(()=>{class e extends l.a{constructor(e,t,i){super(e),this.recordsService=t,this.recordsHelper=i,this.fieldsWithSection=new Map}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.owner,this.type=this.route.snapshot.params.type,this.create=null!=this.param,this.id=this.route.snapshot.paramMap.get("id");const e=this.create?this.recordsService.getRecordDataForNew({owner:this.param,type:this.type}):this.recordsService.getRecordDataForEdit({id:this.id});this.addSub(e.subscribe(e=>{this.data=e}))}onDataInitialized(e){this.columnLayout=this.recordsHelper.isColumnLayout(e.type),this.fieldsWithoutSection=e.fields.filter(e=>null==e.section)||[],(e.type.sections||[]).forEach(t=>{const i=e.fields.filter(e=>null!=e.section&&e.section.id===t.id);Object(c.i)(i)||this.fieldsWithSection.set(t,i)}),this.form=this.formBuilder.group({}),this.form.setControl("customValues",this.fieldHelper.customValuesFormGroup(e.fields,{currentValues:e.record.customValues,disabledProvider:t=>!this.create&&-1===(e.editableFields||[]).indexOf(t.internalName)}))}resolveColumnClass(e){return this.recordsHelper.resolveColumnClass(e,this.data.type)}get binaryValues(){return this.data.binaryValues}get labelPosition(){return this.columnLayout?"above":"auto"}resolveMenu(e){return this.menu.menuForRecordType(e.user,e.type)}save(){if(Object(c.I)(this.form),!this.form.valid)return;const e=Object(b.a)(this.data.record);e.customValues=this.form.value.customValues;const t=this.create?this.recordsService.createRecord({owner:this.param,type:this.type,body:e}):this.recordsService.updateRecord({id:this.id,body:e});this.addSub(t.subscribe(e=>{this.notification.snackBar(this.create?this.i18n.record.created(this.data.type.name):this.i18n.record.saved(this.data.type.name));const t=null==this.id;if(t&&this.data.type.layout===s.jb.SINGLE)for(const i of this.recordsHelper.recordPermissions(null==this.data.user))i.type.id===this.data.type.id&&(i.singleRecordId=e);this.router.navigate(["/records","view",e||this.id],{replaceUrl:t})}))}fieldSize(e){return this.fieldHelper.fieldSize(e)}}return e.\u0275fac=function(t){return new(t||e)(u.Kb(u.r),u.Kb(o.a),u.Kb(r.a))},e.\u0275cmp=u.Eb({type:e,selectors:[["record-form"]],features:[u.ub],decls:3,vars:4,consts:[[3,"ready"],[3,"heading","mobileHeading",4,"ngIf"],[3,"heading","mobileHeading"],[4,"ngIf"],[3,"formGroup","ngClass"],[3,"ngClass",4,"ngIf"],[3,"label","kind","fieldSize","required","labelPosition","ngClass",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"disabled","label","action"],[3,"user"],[3,"value"],["class","border-0",4,"ngIf"],[1,"border-0"],[3,"ngClass"],[3,"label","kind","fieldSize","required","labelPosition","ngClass"],["hideLabel","",3,"field","binaryValues","formControl"]],template:function(e,t){1&e&&(u.Qb(0,"page-layout",0),u.ac(1,"async"),u.Bc(2,R,10,15,"page-content",1),u.Pb()),2&e&&(u.gc("ready",u.bc(1,2,t.data$)),u.xb(2),u.gc("ngIf",t.data))},directives:[d.a,f.t,g.a,h.H,h.v,h.n,f.q,f.s,p.a,m.a,v.a,y.a,x.a,P.a,h.u,h.k],pipes:[f.b],encapsulation:2,changeDetection:0}),e})();var $=i("xdKd"),Q=i("tAww"),N=i("rCAV"),V=i("v4xg"),k=i("DIHi"),A=i("JbOn"),H=i("Zilp"),M=i("IbGL"),z=i("Ae/X"),E=i("Ls5z"),j=i("4APx"),W=i("chz4"),q=i("6g1M"),K=i("uao2"),G=i("fe3a"),X=i("iM3x"),U=i("5Wk5"),_=i("Mfq2"),J=i("H4pW"),Y=i("/kmK");function ee(e,t){1&e&&u.Lb(0,"div",5)}function te(e,t){if(1&e&&(u.Ob(0),u.Qb(1,"div",5),u.Qb(2,"label-value",12),u.Lb(3,"user-link",13),u.Pb(),u.Pb(),u.Bc(4,ee,1,0,"div",14),u.Nb()),2&e){const e=u.Zb(2);u.xb(2),u.gc("label",e.i18n.general.user),u.xb(1),u.gc("user",e.user),u.xb(1),u.gc("ngIf",e.layout.gtsm$)}}function ie(e,t){if(1&e&&u.Lb(0,"field-option",19),2&e){const e=t.$implicit,i=u.Zb(4);u.gc("value",i.ApiHelper.internalNameOrId(e))("internalName",e.internalName)("id",e.id)("text",e.name)("parent",e.groupSet)}}function ne(e,t){if(1&e&&(u.Qb(0,"div",5),u.Qb(1,"multi-selection-field",17),u.Bc(2,ie,1,5,"field-option",18),u.Pb(),u.Pb()),2&e){const e=u.Zb(3);u.xb(1),u.gc("label",e.i18n.user.groups),u.xb(1),u.gc("ngForOf",e.groups)}}const ae=function(){return["broker"]},se=function(e){return{roles:e}};function oe(e,t){if(1&e&&(u.Ob(0),u.Bc(1,ne,3,2,"div",14),u.Qb(2,"div",5),u.Lb(3,"user-field",15),u.Pb(),u.Qb(4,"div",5),u.Lb(5,"user-field",16),u.Pb(),u.Nb()),2&e){const e=u.Zb(2);u.xb(1),u.gc("ngIf",e.groups.length>1),u.xb(2),u.gc("label",e.i18n.user.broker)("filters",u.jc(5,se,u.ic(4,ae))),u.xb(2),u.gc("label",e.i18n.general.user)}}function re(e,t){if(1&e&&(u.Ob(0),u.Lb(1,"div",20),u.Qb(2,"div",5),u.Lb(3,"date-field",21),u.Pb(),u.Qb(4,"div",5),u.Lb(5,"date-field",22),u.Pb(),u.Nb()),2&e){const e=u.Zb(2);u.xb(3),u.gc("label",e.i18n.general.beginDate),u.xb(2),u.gc("label",e.i18n.general.endDate)}}function le(e,t){if(1&e&&(u.Qb(0,"div",5),u.Lb(1,"custom-field-filter",23),u.Pb()),2&e){const e=t.$implicit,i=u.Zb(2);u.xb(1),u.gc("field",e)("formControl",i.form.get("customValues").get(e.internalName))}}function ce(e,t){if(1&e&&(u.Qb(0,"div",5),u.Lb(1,"basic-profile-field-filter",23),u.Pb()),2&e){const e=t.$implicit,i=u.Zb(3);u.xb(1),u.gc("field",e)("formControl",i.form.get("profileFields").get(e.field))}}function be(e,t){if(1&e&&(u.Qb(0,"div",5),u.Lb(1,"custom-field-filter",23),u.Pb()),2&e){const e=t.$implicit,i=u.Zb(3);u.xb(1),u.gc("field",e)("formControl",i.form.get("profileFields").get(e.internalName))}}function ue(e,t){if(1&e&&(u.Ob(0),u.Bc(1,ce,2,2,"div",8),u.Bc(2,be,2,2,"div",8),u.Nb()),2&e){const e=u.Zb(2);u.xb(1),u.gc("ngForOf",e.basicProfileFields),u.xb(1),u.gc("ngForOf",e.customProfileFields)}}function de(e,t){if(1&e&&(u.Qb(0,"label-value",30),u.Dc(1),u.ac(2,"dateTime"),u.Pb()),2&e){const e=u.Zb().$implicit,t=u.Zb(2);u.gc("label",t.i18n.general.creationDate),u.xb(1),u.Fc(" ",u.bc(2,2,e.creationDate)," ")}}function fe(e,t){if(1&e&&(u.Qb(0,"label-value",30),u.Dc(1),u.Pb()),2&e){const e=u.Zb().$implicit,t=u.Zb(2);u.gc("label",t.i18n.general.user),u.xb(1),u.Fc(" ",t.recordOwner(e)," ")}}function ge(e,t){if(1&e&&(u.Qb(0,"label-value",30),u.Lb(1,"format-field-value",31),u.Pb()),2&e){const e=t.$implicit,i=u.Zb().$implicit,n=u.Zb(2);u.gc("label",e.name),u.xb(1),u.gc("fields",n.data.customFields)("plainText",!0)("fieldName",e.internalName)("object",i)("customValues",i.customValues)}}function he(e,t){if(1&e){const e=u.Rb();u.Qb(0,"button",32),u.Xb("click",(function(t){u.sc(e);const i=u.Zb().$implicit,n=u.Zb(2);return n.router.navigate(n.editPath(i)),t.stopPropagation(),t.preventDefault()})),u.Lb(1,"icon",33),u.Pb()}if(2&e){const e=u.Zb(3);u.gc("tooltip",e.i18n.general.edit),u.xb(1),u.gc("icon",e.SvgIcon.Pencil)}}const pe=function(e){return{"mt-2":e}};function me(e,t){if(1&e){const e=u.Rb();u.Qb(0,"button",34),u.Xb("click",(function(t){u.sc(e);const i=u.Zb().$implicit;return u.Zb(2).remove(i),t.stopPropagation(),t.preventDefault()})),u.Lb(1,"icon",33),u.Pb()}if(2&e){const e=u.Zb(3);u.gc("tooltip",e.i18n.general.remove)("ngClass",u.jc(3,pe,e.data.edit)),u.xb(1),u.gc("icon",e.SvgIcon.Trash)}}function ve(e,t){if(1&e&&(u.Qb(0,"mobile-result"),u.Qb(1,"div",24),u.Qb(2,"div"),u.Bc(3,de,3,4,"label-value",25),u.Bc(4,fe,2,2,"label-value",25),u.Bc(5,ge,2,6,"label-value",26),u.Pb(),u.Qb(6,"div",27),u.Bc(7,he,2,2,"button",28),u.Bc(8,me,2,5,"button",29),u.Pb(),u.Pb(),u.Pb()),2&e){const e=u.Zb(2);u.xb(3),u.gc("ngIf",!e.data.hideDateOnList),u.xb(1),u.gc("ngIf",e.generalSearch),u.xb(1),u.gc("ngForOf",e.fieldsInList),u.xb(2),u.gc("ngIf",e.data.edit),u.xb(1),u.gc("ngIf",e.data.remove)}}function ye(e,t){if(1&e&&(u.Qb(0,"th"),u.Dc(1),u.Pb()),2&e){const e=u.Zb(3);u.xb(1),u.Fc("",e.i18n.general.creationDate," ")}}function xe(e,t){if(1&e&&(u.Qb(0,"th"),u.Dc(1),u.Pb()),2&e){const e=u.Zb(3);u.xb(1),u.Ec(e.i18n.general.user)}}function Pe(e,t){if(1&e&&(u.Qb(0,"th"),u.Dc(1),u.Pb()),2&e){const e=t.$implicit,i=u.Zb(3);u.xb(1),u.Fc(" ",i.fieldName(e.internalName)," ")}}function Fe(e,t){if(1&e&&(u.Qb(0,"td"),u.Dc(1),u.ac(2,"dateTime"),u.Pb()),2&e){const e=u.Zb().$implicit;u.xb(1),u.Fc("",u.bc(2,1,e.creationDate)," ")}}function Ie(e,t){if(1&e&&(u.Qb(0,"td"),u.Dc(1),u.Pb()),2&e){const e=u.Zb().$implicit,t=u.Zb(3);u.xb(1),u.Ec(t.recordOwner(e))}}function Se(e,t){if(1&e&&(u.Qb(0,"td"),u.Lb(1,"format-field-value",31),u.Pb()),2&e){const e=t.$implicit,i=u.Zb().$implicit,n=u.Zb(3);u.xb(1),u.gc("fields",n.data.customFields)("plainText",!0)("fieldName",e.internalName)("object",i)("customValues",i.customValues)}}function we(e,t){if(1&e){const e=u.Rb();u.Qb(0,"button",32),u.Xb("click",(function(t){u.sc(e);const i=u.Zb().$implicit,n=u.Zb(3);return n.router.navigate(n.editPath(i)),t.stopPropagation()})),u.Lb(1,"icon",33),u.Pb()}if(2&e){const e=u.Zb(4);u.gc("tooltip",e.i18n.general.edit),u.xb(1),u.gc("icon",e.SvgIcon.Pencil)}}function Ce(e,t){if(1&e){const e=u.Rb();u.Qb(0,"button",34),u.Xb("click",(function(t){u.sc(e);const i=u.Zb().$implicit;return u.Zb(3).remove(i),t.stopPropagation()})),u.Lb(1,"icon",33),u.Pb()}if(2&e){const e=u.Zb(4);u.gc("tooltip",e.i18n.general.remove)("ngClass",e.data.edit?"ml-3":""),u.xb(1),u.gc("icon",e.SvgIcon.Trash)}}function Le(e,t){if(1&e){const e=u.Rb();u.Qb(0,"tr",39),u.Xb("click",(function(){u.sc(e);const i=t.$implicit,n=u.Zb(3);return n.router.navigate(n.viewPath(i))})),u.Bc(1,Fe,3,3,"td",1),u.Bc(2,Ie,2,1,"td",1),u.Bc(3,Se,2,5,"td",36),u.Qb(4,"td",40),u.Bc(5,we,2,2,"button",28),u.Bc(6,Ce,2,3,"button",29),u.Pb(),u.Pb()}if(2&e){const e=u.Zb(3);u.xb(1),u.gc("ngIf",!e.data.hideDateOnList),u.xb(1),u.gc("ngIf",e.generalSearch),u.xb(1),u.gc("ngForOf",e.fieldsInList),u.xb(2),u.gc("ngIf",e.data.edit),u.xb(1),u.gc("ngIf",e.data.remove)}}function Oe(e,t){if(1&e&&(u.Qb(0,"table",35),u.Qb(1,"thead"),u.Bc(2,ye,2,1,"th",1),u.Bc(3,xe,2,1,"th",1),u.Bc(4,Pe,2,1,"th",36),u.Lb(5,"th",37),u.Pb(),u.Qb(6,"tbody"),u.Bc(7,Le,7,5,"tr",38),u.ac(8,"async"),u.Pb(),u.Pb()),2&e){const e=u.Zb(2);var i;u.xb(2),u.gc("ngIf",!e.data.hideDateOnList),u.xb(1),u.gc("ngIf",e.generalSearch),u.xb(1),u.gc("ngForOf",e.fieldsInList),u.xb(3),u.gc("ngForOf",null==(i=u.bc(8,4,e.results$))?null:i.results)}}function Be(e,t){if(1&e){const e=u.Rb();u.Ob(0),u.Qb(1,"page-content",2),u.ac(2,"async"),u.Qb(3,"form",3),u.Qb(4,"div",4),u.Bc(5,te,5,3,"ng-container",1),u.Qb(6,"div",5),u.Lb(7,"input-field",6),u.Pb(),u.Bc(8,oe,6,7,"ng-container",1),u.Qb(9,"div",5),u.Lb(10,"user-field",7),u.Pb(),u.Bc(11,re,6,2,"ng-container",1),u.Bc(12,le,2,2,"div",8),u.Bc(13,ue,3,2,"ng-container",1),u.Pb(),u.Pb(),u.Pb(),u.Qb(14,"results-layout",9),u.Xb("update",(function(t){return u.sc(e),u.Zb().update(t)})),u.ac(15,"async"),u.Bc(16,ve,9,5,"mobile-result",10),u.Bc(17,Oe,9,6,"table",11),u.Pb(),u.Nb()}if(2&e){const e=u.Zb();u.xb(1),u.gc("heading",e.data.type.pluralName)("mobileHeading",e.data.type.pluralName)("headingActions",u.bc(2,14,e.headingActions$)),u.xb(2),u.gc("formGroup",e.form),u.xb(2),u.gc("ngIf",e.user&&!e.authHelper.isSelf(e.user)),u.xb(2),u.gc("label",e.i18n.general.keywords),u.xb(1),u.gc("ngIf",e.generalSearch),u.xb(2),u.gc("label",e.i18n.record.createdBy),u.xb(1),u.gc("ngIf",!e.data.hideDateOnList),u.xb(1),u.gc("ngForOf",e.fieldsInSearch),u.xb(1),u.gc("ngIf",e.generalSearch),u.xb(1),u.gc("results",u.bc(15,16,e.results$))("rendering$",e.rendering$)("toLink",e.toLink)}}let Te=(()=>{class e extends V.a{constructor(e,t){super(e),this.recordsService=t}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.owner,this.type=this.route.snapshot.params.type,this.addSub(this.generalSearch?this.recordsService.getRecordDataForGeneralSearch({type:this.type}).subscribe(e=>this.data=e):this.recordsService.getRecordDataForOwnerSearch({owner:this.param,type:this.type}).subscribe(e=>this.data=e))}onDataInitialized(e){if(!this.generalSearch&&e.type.layout!==s.jb.LIST)throw new Error("Invalid record layout: "+e.type.layout);if(this.fieldsInSearch=e.customFields.filter(t=>e.fieldsInSearch.includes(t.internalName)),this.fieldsInList=e.customFields.filter(t=>e.fieldsInList.includes(t.internalName)),this.form.setControl("customValues",this.fieldHelper.customFieldsForSearchFormGroup(this.fieldsInSearch)),this.generalSearch){const t=e;this.basicProfileFields=t.basicProfileFields,this.customProfileFields=t.customProfileFields,this.groups=t.groups||[],this.form.setControl("profileFields",this.fieldHelper.profileFieldsForSearchFormGroup(this.basicProfileFields,this.customProfileFields))}this.form.patchValue(e.query);const t=[];!this.generalSearch&&e.create&&t.push(new Q.c($.a.PlusCircle,this.i18n.general.addNew,()=>this.router.navigate(["/records",this.param,this.type,"new"]),!0)),this.exportHelper.headingActions(e.exportFormats,e=>{const t=Object.assign({format:e.internalName},this.toSearchParams(this.form.value));return this.generalSearch?this.recordsService.exportGeneralRecords$Response(t):this.recordsService.exportOwnerRecords$Response(t)}),this.headingActions=t,super.onDataInitialized(e)}doSearch(e){return this.generalSearch?this.recordsService.searchGeneralRecords$Response(e):this.recordsService.searchOwnerRecords$Response(e)}remove(e){this.notification.confirm({message:this.i18n.general.removeItemConfirm,callback:()=>this.doRemove(e)})}doRemove(e){this.addSub(this.recordsService.deleteRecord({id:e.id}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeItemDone),this.update()}))}recordOwner(e){return this.generalSearch?e.user.display:""}fieldName(e){return this.fieldHelper.fieldDisplay(e,this.data.customFields)}viewPath(e){return["/records","view",e.id]}editPath(e){return["/records","edit",e.id]}get toLink(){return e=>this.viewPath(e)}get user(){return this.data?this.data.user:null}toSearchParams(e){const t=Object.assign({},e);if(t.customFields=this.fieldHelper.toCustomValuesFilter(e.customValues),t.profileFields=this.fieldHelper.toProfileFieldsFilter(e.profileFields),t.creationPeriod=N.a.dateRangeFilter(e.beginDate,e.endDate),this.generalSearch){const i=t;i.brokers=e.broker?[e.broker]:[],delete i.broker}else t.owner=this.param;return t.type=this.type,t}getFormControlNames(){return["keywords","customValues","createdBy","beginDate","endDate","broker","groups","user","profileFields"]}resolveMenu(e){return this.menu.menuForRecordType(this.generalSearch?null:e.user,e.type)}get generalSearch(){return this.param===r.a.GENERAL_SEARCH}}return e.\u0275fac=function(t){return new(t||e)(u.Kb(u.r),u.Kb(o.a))},e.\u0275cmp=u.Eb({type:e,selectors:[["search-records"]],features:[u.ub],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator",3,"formGroup"],[1,"row"],[1,"col-12","col-md-6"],["labelPosition","side","formControlName","keywords","fieldSize","full",3,"label"],["labelPosition","side","formControlName","createdBy",3,"label"],["class","col-12 col-md-6",4,"ngFor","ngForOf"],["resultType","list",3,"results","rendering$","toLink","update"],[4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],["labelPosition","side","kind","fieldView",3,"label"],[3,"user"],["class","col-12 col-md-6",4,"ngIf"],["labelPosition","side","formControlName","broker",3,"label","filters"],["labelPosition","side","formControlName","user",3,"label"],["labelPosition","side","hierarchyProperty","groupSet","formControlName","groups",3,"label"],[3,"value","internalName","id","text","parent",4,"ngFor","ngForOf"],[3,"value","internalName","id","text","parent"],[1,"w-100"],["labelPosition","side","formControlName","beginDate","minDate","past100","maxDate","todayEnd","fieldSize","full",3,"label"],["labelPosition","side","formControlName","endDate","minDate","past100","maxDate","todayEnd","fieldSize","full",3,"label"],["labelPosition","side",3,"field","formControl"],[1,"d-flex"],["labelPosition","above",3,"label",4,"ngIf"],["labelPosition","above",3,"label",4,"ngFor","ngForOf"],[1,"ml-auto","text-right","d-flex","flex-column"],["class","btn btn-icon",3,"tooltip","click",4,"ngIf"],["class","btn btn-icon",3,"tooltip","ngClass","click",4,"ngIf"],["labelPosition","above",3,"label"],[3,"fields","plainText","fieldName","object","customValues"],[1,"btn","btn-icon",3,"tooltip","click"],[3,"icon"],[1,"btn","btn-icon",3,"tooltip","ngClass","click"],[1,"table","table-hover","cursor-pointer"],[4,"ngFor","ngForOf"],[1,"actions"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"actions","actions-multiple"]],template:function(e,t){1&e&&(u.Qb(0,"page-layout",0),u.ac(1,"async"),u.Bc(2,Be,18,18,"ng-container",1),u.Pb()),2&e&&(u.gc("ready",u.bc(1,2,t.data$)),u.xb(2),u.gc("ngIf",t.data))},directives:[d.a,f.t,g.a,h.H,h.v,h.n,k.a,h.u,h.l,A.a,f.s,H.a,M.a,z.a,x.a,E.a,j.a,W.a,q.a,K.a,h.k,G.a,X.a,U.a,_.b,J.a,f.q],pipes:[f.b,Y.a],encapsulation:2,changeDetection:0}),e})();var Ze=i("2Vo4");function Re(e,t){if(1&e&&(u.Ob(0),u.Lb(1,"user-info",4),u.Lb(2,"hr"),u.Nb()),2&e){const e=u.Zb(2);u.xb(1),u.gc("user",e.data.user)}}function De(e,t){1&e&&u.Lb(0,"hr")}function $e(e,t){if(1&e&&(u.Qb(0,"label-value",5),u.Dc(1),u.ac(2,"dateTime"),u.Pb()),2&e){const e=u.Zb().$implicit,t=u.Zb(2);u.gc("label",t.i18n.record.lastModificationDate),u.xb(1),u.Fc(" ",u.bc(2,2,e.lastModificationDate)," ")}}function Qe(e,t){if(1&e&&(u.Qb(0,"label-value",5),u.Dc(1),u.Pb()),2&e){const e=u.Zb().$implicit,t=u.Zb(2);u.gc("label",t.i18n.record.lastModifiedBy),u.xb(1),u.Fc(" ",e.lastModifiedBy.display," ")}}function Ne(e,t){if(1&e&&(u.Qb(0,"label-value",5),u.Lb(1,"format-field-value",12),u.Pb()),2&e){const e=t.$implicit,i=u.Zb().$implicit,n=u.Zb(2);u.gc("label",e.name),u.xb(1),u.gc("fields",n.data.customFields)("plainText",!0)("fieldName",e.internalName)("object",i)("customValues",i.customValues)}}function Ve(e,t){if(1&e){const e=u.Rb();u.Qb(0,"action-button",10),u.Xb("action",(function(){u.sc(e);const t=u.Zb().$implicit,i=u.Zb(2);return i.router.navigate(i.editPath(t))})),u.ac(1,"async"),u.Pb()}if(2&e){const e=u.Zb(3);u.gc("disabled",u.bc(1,2,e.requesting$))("label",e.i18n.general.edit)}}function ke(e,t){if(1&e){const e=u.Rb();u.Qb(0,"action-button",13),u.Xb("action",(function(){u.sc(e);const t=u.Zb().$implicit;return u.Zb(2).remove(t)})),u.ac(1,"async"),u.Pb()}if(2&e){const e=u.Zb(3);u.gc("disabled",u.bc(1,2,e.requesting$))("label",e.i18n.general.remove)}}function Ae(e,t){if(1&e){const e=u.Rb();u.Ob(0),u.Bc(1,De,1,0,"hr",1),u.Qb(2,"label-value",5),u.Dc(3),u.ac(4,"dateTime"),u.Pb(),u.Qb(5,"label-value",5),u.Dc(6),u.Pb(),u.Bc(7,$e,3,4,"label-value",6),u.Bc(8,Qe,2,2,"label-value",6),u.Bc(9,Ne,2,6,"label-value",7),u.Qb(10,"actions",8),u.Bc(11,Ve,2,4,"action-button",9),u.Qb(12,"action-button",10),u.Xb("action",(function(){u.sc(e);const i=t.$implicit,n=u.Zb(2);return n.router.navigate(n.viewPath(i))})),u.ac(13,"async"),u.Pb(),u.Bc(14,ke,2,4,"action-button",11),u.Pb(),u.Nb()}if(2&e){const e=t.$implicit,i=t.first,n=u.Zb(2);u.xb(1),u.gc("ngIf",!i),u.xb(1),u.gc("label",n.i18n.general.creationDate),u.xb(1),u.Fc(" ",u.bc(4,12,e.creationDate)," "),u.xb(2),u.gc("label",n.i18n.record.createdBy),u.xb(1),u.Fc(" ",e.createdBy.display," "),u.xb(1),u.gc("ngIf",e.lastModifiedBy),u.xb(1),u.gc("ngIf",e.lastModifiedBy),u.xb(1),u.gc("ngForOf",n.fieldsInList),u.xb(2),u.gc("ngIf",n.data.edit),u.xb(1),u.gc("disabled",u.bc(13,14,n.requesting$))("label",n.i18n.general.view),u.xb(2),u.gc("ngIf",n.data.remove)}}function He(e,t){if(1&e&&(u.Ob(0),u.Qb(1,"page-content",2),u.ac(2,"async"),u.Bc(3,Re,3,1,"ng-container",1),u.Bc(4,Ae,15,16,"ng-container",3),u.ac(5,"async"),u.Pb(),u.Nb()),2&e){const e=u.Zb();u.xb(1),u.gc("heading",e.data.type.pluralName)("mobileHeading",e.data.type.pluralName)("headingActions",u.bc(2,5,e.headingActions$)),u.xb(2),u.gc("ngIf",e.data.user&&!e.authHelper.isSelf(e.data.user)),u.xb(1),u.gc("ngForOf",u.bc(5,7,e.results$))}}let Me=(()=>{class e extends l.a{constructor(e,t){super(e),this.recordsService=t,this.results$=new Ze.a(null)}ngOnInit(){super.ngOnInit(),this.param=this.route.snapshot.params.owner,this.type=this.route.snapshot.params.type,this.addSub(this.recordsService.getRecordDataForOwnerSearch({owner:this.param,type:this.type}).subscribe(e=>{if(e.type.layout!==s.jb.TILED)throw new Error("Invalid record layout: "+e.type.layout);this.fieldsInList=e.customFields.filter(t=>e.fieldsInList.includes(t.internalName)),this.data=e}))}onDataInitialized(e){const t=[];e.create&&t.push(new Q.c($.a.PlusCircle,this.i18n.general.addNew,()=>this.router.navigate(["/records",this.param,this.type,"new"]),!0)),this.headingActions=t,this.addSub(this.doSearch(this.toSearchParams()).subscribe(e=>{this.results$.next(e.body)}))}editPath(e){return["/records","edit",e.id]}viewPath(e){return["/records","view",e.id]}remove(e){this.notification.confirm({message:this.i18n.general.removeItemConfirm,callback:()=>this.doRemove(e)})}doRemove(e){this.addSub(this.recordsService.deleteRecord({id:e.id}).subscribe(()=>{this.notification.snackBar(this.i18n.general.removeItemDone),this.reload()}))}toSearchParams(){return{pageSize:2147483647,owner:this.param,type:this.type}}doSearch(e){return this.recordsService.searchOwnerRecords$Response(e)}getFormControlNames(){return[]}resolveMenu(e){return this.menu.menuForRecordType(e.user,e.type)}}return e.\u0275fac=function(t){return new(t||e)(u.Kb(u.r),u.Kb(o.a))},e.\u0275cmp=u.Eb({type:e,selectors:[["tiled-records"]],features:[u.ub],decls:3,vars:4,consts:[[3,"ready"],[4,"ngIf"],[3,"heading","mobileHeading","headingActions"],[4,"ngFor","ngForOf"],[3,"user"],[3,"label"],[3,"label",4,"ngIf"],[3,"label",4,"ngFor","ngForOf"],[1,"mb-3"],[3,"disabled","label","action",4,"ngIf"],[3,"disabled","label","action"],["outline","",3,"disabled","label","action",4,"ngIf"],[3,"fields","plainText","fieldName","object","customValues"],["outline","",3,"disabled","label","action"]],template:function(e,t){1&e&&(u.Qb(0,"page-layout",0),u.ac(1,"async"),u.Bc(2,He,6,9,"ng-container",1),u.Pb()),2&e&&(u.gc("ready",u.bc(1,2,t.data$)),u.xb(2),u.gc("ngIf",t.data))},directives:[d.a,f.t,g.a,f.s,v.a,x.a,p.a,m.a,U.a],pipes:[f.b,Y.a],encapsulation:2,changeDetection:0}),e})();var ze=i("Ewue"),Ee=i("Pm8L"),je=i("nznZ");function We(e,t){if(1&e&&(u.Qb(0,"label-value",9),u.Lb(1,"user-link",10),u.Pb()),2&e){const e=u.Zb(2);u.zb(e.resolveColumnClass()),u.gc("labelPosition",e.labelPosition)("label",e.i18n.general.user),u.xb(1),u.gc("user",e.data.user)}}function qe(e,t){if(1&e&&(u.Qb(0,"label-value",9),u.Dc(1),u.ac(2,"dateTime"),u.Pb()),2&e){const e=u.Zb(2);u.zb(e.resolveColumnClass()),u.gc("labelPosition",e.labelPosition)("label",e.i18n.general.creationDate),u.xb(1),u.Fc(" ",u.bc(2,5,e.data.creationDate)," ")}}function Ke(e,t){if(1&e&&(u.Qb(0,"label-value",9),u.Dc(1),u.Pb()),2&e){const e=u.Zb(2);u.zb(e.resolveColumnClass()),u.gc("labelPosition",e.labelPosition)("label",e.i18n.record.createdBy),u.xb(1),u.Fc(" ",e.data.createdBy.display," ")}}function Ge(e,t){if(1&e&&(u.Qb(0,"label-value",9),u.Dc(1),u.ac(2,"dateTime"),u.Pb()),2&e){const e=u.Zb(2);u.zb(e.resolveColumnClass()),u.gc("labelPosition",e.labelPosition)("label",e.i18n.record.lastModificationDate),u.xb(1),u.Fc(" ",u.bc(2,5,e.data.lastModificationDate)," ")}}function Xe(e,t){if(1&e&&(u.Qb(0,"label-value",9),u.Dc(1),u.Pb()),2&e){const e=u.Zb(2);u.zb(e.resolveColumnClass()),u.gc("labelPosition",e.labelPosition)("label",e.i18n.record.lastModifiedBy),u.xb(1),u.Fc(" ",e.data.lastModifiedBy.display," ")}}function Ue(e,t){1&e&&u.Lb(0,"hr")}function _e(e,t){1&e&&u.Lb(0,"hr")}function Je(e,t){if(1&e&&(u.Ob(0),u.Bc(1,Ue,1,0,"hr",5),u.Lb(2,"rich-text-container",11),u.Bc(3,_e,1,0,"hr",5),u.Nb()),2&e){const e=u.Zb(2);u.xb(1),u.gc("ngIf",e.hasPreviousFields),u.xb(1),u.gc("value",e.data.type.informationText),u.xb(1),u.gc("ngIf",e.data.customValues)}}const Ye=function(e,t,i){return{"mt-2 pt-0 border-0":e,"mb-0":t,"mb-2":i}};function et(e,t){if(1&e&&(u.Qb(0,"h2",3),u.Dc(1),u.Pb()),2&e){const e=u.Zb(2);u.gc("ngClass",u.lc(2,Ye,e.data.type.informationText,"above"===e.labelPosition,"above"!==e.labelPosition)),u.xb(1),u.Fc(" ",e.i18n.record.fields," ")}}const tt=function(e){return{"mt-0":e}};function it(e,t){if(1&e&&u.Lb(0,"custom-field-value",12),2&e){const e=t.$implicit,i=u.Zb(2);u.zb(i.resolveColumnClass(e)),u.gc("labelPosition",i.labelPosition)("fieldValue",e)("ngClass",u.jc(5,tt,!(i.hasPreviousFields&&i.valuesWithoutSection.length>0)))}}function nt(e,t){if(1&e&&u.Lb(0,"custom-field-value",14),2&e){const e=t.$implicit,i=u.Zb(3);u.zb(i.resolveColumnClass(e)),u.gc("labelPosition",i.labelPosition)("fieldValue",e)}}const at=function(e,t,i,n){return{"mt-4":e,"mb-0":t,"mb-2":i,"border-top-0":n}};function st(e,t){if(1&e&&(u.Ob(0),u.Qb(1,"h2",3),u.Dc(2),u.Pb(),u.Bc(3,nt,1,4,"custom-field-value",13),u.Nb()),2&e){const e=t.$implicit,i=t.first,n=u.Zb(2);u.xb(1),u.gc("ngClass",u.mc(3,at,n.valuesWithoutSection.length>0,"above"===n.labelPosition,"above"!==n.labelPosition,i&&0==n.valuesWithoutSection.length&&(!n.hasPreviousFields||n.data.type.informationText))),u.xb(1),u.Fc(" ",e.name," "),u.xb(1),u.gc("ngForOf",n.valuesWithSection.get(e))}}const ot=function(e,t){return{"d-flex flex-row-reverse":e,"mt-n3":t}},rt=function(e,t){return{"d-flex flex-grow-1 flex-column":e,"mr-n3":t}};function lt(e,t){if(1&e&&(u.Qb(0,"page-content",2),u.ac(1,"async"),u.Qb(2,"div",3),u.Qb(3,"div",3),u.Bc(4,We,2,5,"label-value",4),u.Bc(5,qe,3,7,"label-value",4),u.Bc(6,Ke,2,5,"label-value",4),u.Bc(7,Ge,3,7,"label-value",4),u.Bc(8,Xe,2,5,"label-value",4),u.Bc(9,Je,4,3,"ng-container",5),u.Bc(10,et,2,6,"h2",6),u.Bc(11,it,1,7,"custom-field-value",7),u.Bc(12,st,4,8,"ng-container",8),u.Pb(),u.Pb(),u.Pb()),2&e){const e=u.Zb();u.gc("heading",e.i18n.record.title.details(e.title))("mobileHeading",e.i18n.record.mobileTitle.details(e.title))("headingActions",u.bc(1,14,e.headingActions$)),u.xb(2),u.gc("ngClass",u.kc(16,ot,!e.columnLayout,e.hasPreviousFields&&e.columnLayout)),u.xb(1),u.gc("ngClass",u.kc(19,rt,!e.columnLayout,e.columnLayout)),u.xb(1),u.gc("ngIf",!e.isOwner()),u.xb(1),u.gc("ngIf",e.data.creationDate),u.xb(1),u.gc("ngIf",e.data.createdBy),u.xb(1),u.gc("ngIf",e.data.lastModificationDate),u.xb(1),u.gc("ngIf",e.data.lastModifiedBy),u.xb(1),u.gc("ngIf",e.data.type.informationText),u.xb(1),u.gc("ngIf",e.hasPreviousFields&&e.valuesWithoutSection.length>0),u.xb(1),u.gc("ngForOf",e.valuesWithoutSection),u.xb(1),u.gc("ngForOf",e.valuesWithSection.keys())}}const ct=[{path:":owner/:type/list",component:Te,canActivate:[a.a]},{path:":owner/:type/tiled",component:Me,canActivate:[a.a]},{path:"view/:id",component:(()=>{class e extends Ee.a{constructor(e,t,i,n){super(e),this.recordsService=t,this.recordsHelper=i,this.operationHelper=n,this.valuesWithSection=new Map}ngOnInit(){super.ngOnInit();const e=this.route.snapshot.paramMap.get("id");this.addSub(this.recordsService.viewRecord({id:e}).subscribe(e=>{this.data=e}))}onDataInitialized(e){this.headingActions=[],this.title=Object(c.i)(e.display)?e.type.name:e.display,this.columnLayout=this.recordsHelper.isColumnLayout(e.type);const t=e.customValues||[];this.valuesWithoutSection=t.filter(e=>null==e.field.section)||[],(e.type.sections||[]).forEach(e=>{const i=t.filter(t=>null!=t.field.section&&t.field.section.id===e.id);i&&this.valuesWithSection.set(e,i)}),e.canEdit&&this.headingActions.push(new Q.c($.a.Pencil,this.i18n.general.edit,()=>{this.router.navigate(["/records","edit",e.id])},!0));for(const i of e.operations||[])this.headingActions.push(this.operationHelper.headingAction(i,e.id))}resolveColumnClass(e=null){return this.recordsHelper.resolveColumnClass(null==e?null:e.field,this.data.type)}get labelPosition(){return this.columnLayout?"above":"auto"}get hasPreviousFields(){return this.data.createdBy||this.data.lastModifiedBy}isOwner(){return this.authHelper.isSelf(this.data.user)}resolveMenu(e){return this.menu.menuForRecordType(e.user,e.type)}}return e.\u0275fac=function(t){return new(t||e)(u.Kb(u.r),u.Kb(o.a),u.Kb(r.a),u.Kb(ze.a))},e.\u0275cmp=u.Eb({type:e,selectors:[["view-record"]],features:[u.ub],decls:3,vars:4,consts:[[3,"ready"],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions",4,"ngIf"],["last","","mode","viewForm",3,"heading","mobileHeading","headingActions"],[3,"ngClass"],[3,"labelPosition","class","label",4,"ngIf"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"labelPosition","fieldValue","class","ngClass",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"labelPosition","label"],[3,"user"],[3,"value"],[3,"labelPosition","fieldValue","ngClass"],[3,"labelPosition","fieldValue","class",4,"ngFor","ngForOf"],[3,"labelPosition","fieldValue"]],template:function(e,t){1&e&&(u.Qb(0,"page-layout",0),u.ac(1,"async"),u.Bc(2,lt,13,22,"page-content",1),u.Pb()),2&e&&(u.gc("ready",u.bc(1,2,t.data$)),u.xb(2),u.gc("ngIf",t.data))},directives:[d.a,f.t,g.a,f.q,f.s,x.a,E.a,y.a,je.a],pipes:[f.b,Y.a],encapsulation:2,changeDetection:0}),e})(),canActivate:[a.a]},{path:":owner/:type/new",component:D,canActivate:[a.a]},{path:"edit/:id",component:D,canActivate:[a.a]}];let bt=(()=>{class e{}return e.\u0275mod=u.Ib({type:e}),e.\u0275inj=u.Hb({factory:function(t){return new(t||e)},imports:[[n.i.forChild(ct)],n.i]}),e})();var ut=i("Se2V");let dt=(()=>{class e{}return e.\u0275mod=u.Ib({type:e}),e.\u0275inj=u.Hb({factory:function(t){return new(t||e)},imports:[[bt,ut.a]]}),e})()},v4xg:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("3Pt+"),a=i("mwYl"),s=i("tAww"),o=i("rCAV"),r=i("uuU0"),l=i("Ky6R"),c=i("TFmz"),b=i("Muja"),u=i("2Vo4"),d=i("Kj3r"),f=i("xdKd"),g=i("fXoL");let h=(()=>{class e extends r.a{constructor(e){super(e),this.ResultType=c.a,this.resultType$=new u.a(null),this.resultTypeControl=new n.j(null),this.results$=new u.a(null),this.allowedResultTypes$=new u.a([c.a.LIST]),this.rendering$=new u.a(!1),this.moreFilters$=new u.a(!1),this.ignoreNextUpdate=!1,this.nextRequestState=e.get(a.a);const t={page:0};t.resultType=this.getInitialResultType();for(const i of this.getFormControlNames()||[])t[i]=null;this.form=this.formBuilder.group(t)}getInitialFormValue(e){return e.query||{}}onDataInitialized(e){this.form.patchValue(this.getInitialFormValue(e)),this.stateManager.manage(this.form),this.stateManager.manage(this.resultTypeControl,"resultType"),this.stateManager.manageValue(this.moreFilters$,"moreFilters"),this.previousValue=this.form.value,this.previousResultType=this.resultType,this.resultType$.next(this.previousResultType),this.addSub(this.resultTypeControl.valueChanges.subscribe(e=>{const t=this.previousResultType;this.previousResultType=e,this.resultType$.next(e),this.shouldUpdateOnResultTypeChange(e,t)&&this.update(),null!=t&&t===e||(this.rendering=!0,this.stateManager.set("resultType",e),this.onResultTypeChanged(e,t))})),setTimeout(()=>{this.addSub(this.form.valueChanges.pipe(Object(d.a)(o.a.DEBOUNCE_TIME)).subscribe(e=>{this.shouldUpdateOnChange(e)&&this.update(),this.previousValue=e}),!0),this.previousResultType!==c.a.CATEGORIES&&this.update()},1)}shouldUpdateOnResultTypeChange(e,t){return e!==c.a.CATEGORIES&&([c.a.LIST,c.a.TILES].includes(t)!==[c.a.LIST,c.a.TILES].includes(e)||t===c.a.MAP!=(e===c.a.MAP))}shouldUpdateOnChange(e){return!Object(b.a)(this.previousValue,e)}get results(){return this.results$.value}set results(e){this.onBeforeRender(e),this.results$.next(e)}onBeforeRender(e){}get rendering(){return this.rendering$.value}set rendering(e){this.rendering$.next(e)}get allowedResultTypes(){return this.allowedResultTypes$.value}set allowedResultTypes(e){this.allowedResultTypes$.next(e)}get moreFilters(){return this.moreFilters$.value}set moreFilters(e){this.moreFilters$.next(e)}get pageData(){const e=this.form.value;return{page:e.page,pageSize:e.pageSize}}set pageData(e){this.form.patchValue(e)}get resultType(){return this.resultTypeControl.value}set resultType(e){null==e&&(e=this.getInitialResultType()),this.resultTypeControl.setValue(e)}ngOnInit(){super.ngOnInit(),this.resultType=this.getInitialResultType()}get moreFiltersAction(){return this._moreFiltersAction||(this._moreFiltersAction=new s.c(this.showMoreFiltersIcon(),this.showMoreFiltersLabel(),()=>{this.moreFilters=!this.moreFilters,this._moreFiltersAction.icon=this.moreFilters?this.showLessFiltersIcon():this.showMoreFiltersIcon(),this._moreFiltersAction.label=this.moreFilters?this.showLessFiltersLabel():this.showMoreFiltersLabel()},!0),this._moreFiltersAction.breakpoint="gt-xxs",this._moreFiltersAction.maybeRoot=!0),this._moreFiltersAction}showMoreFiltersLabel(){return this.i18n.general.showMoreFilters}showLessFiltersLabel(){return this.i18n.general.showLessFilters}showMoreFiltersIcon(){return f.a.Funnel}showLessFiltersIcon(){return f.a.Funnel}onResultTypeChanged(e,t){}getInitialResultType(){return c.a.LIST}update(e){if(this.ignoreNextUpdate)return;e&&(this.form.patchValue(e,{emitEvent:!1}),this.stateManager.set("form",this.form.value)),this.rendering=!0,this.results=null,this.nextRequestState.leaveNotification=!0;const t=this.form.value;t.pageSize=this.uiLayout.searchPageSize,this.addSub(this.doSearch(this.toSearchParams(t)).subscribe(e=>{this.resultType===c.a.CATEGORIES&&(this.resultType=this.allowedResultTypes.find(e=>e!==c.a.CATEGORIES)),this.results=l.a.from(e)}))}resetPage(e=!1){this.form.patchValue({page:0},{emitEvent:e})}doIgnoringUpdate(e){this.ignoreNextUpdate=!0;try{e()}finally{this.ignoreNextUpdate=!1}}}return e.\u0275fac=function(t){return new(t||e)(g.Kb(g.r))},e.\u0275dir=g.Fb({type:e,features:[g.ub]}),e})()}}]);