(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{bnt4:function(t,e,i){"use strict";i.r(e),i.d(e,"PersonalModule",(function(){return X}));var s=i("tyNb"),n=i("IbW5"),a=i("wgiT"),o=i("xdKd"),r=i("tAww"),l=i("rCAV"),c=i("v4xg"),u=i("QH++"),h=i("cp0P"),b=i("SxV6"),d=i("zP0r"),g=i("fXoL"),p=i("3qho"),f=i("I0FJ"),m=i("3Pt+"),v=i("yHfF"),T=i("Zilp"),y=i("IbGL"),F=i("Ae/X"),w=i("iM3x"),I=i("Mfq2"),x=i("ofXK"),S=i("sifq"),C=i("H4pW"),R=i("/kmK");function O(t,e){if(1&t&&(g.Qb(0,"mobile-result",8),g.Qb(1,"div",9),g.Dc(2),g.Pb(),g.Qb(3,"div",10),g.Dc(4),g.ac(5,"dateTime"),g.Pb(),g.Pb()),2&t){const t=e.$implicit,i=g.Zb();g.gc("avatarImage",null==t.relatedUser?null:t.relatedUser.image)("avatarIcon",i.SvgIcon.Bell),g.xb(1),g.gc("tooltip",t.message),g.xb(1),g.Ec(t.subject),g.xb(1),g.gc("tooltip",t.message),g.xb(1),g.Fc(" ",g.bc(5,6,t.date)," ")}}const A=function(t){return{"font-weight-bold":t}},P=function(t,e){return{"pb-0":t,"border-0":e}};function L(t,e){if(1&t){const t=g.Rb();g.Ob(0),g.Qb(1,"tr",15),g.Xb("click",(function(){g.sc(t);const i=e.$implicit;return g.Zb(2).rowClick(i)})),g.Qb(2,"td",16),g.ac(3,"async"),g.ac(4,"async"),g.Lb(5,"avatar",17),g.Pb(),g.Qb(6,"td"),g.Dc(7),g.ac(8,"dateTime"),g.Pb(),g.Qb(9,"td"),g.Dc(10),g.Pb(),g.Qb(11,"td",13),g.Qb(12,"button",18),g.Xb("click",(function(i){g.sc(t);const s=e.$implicit;return g.Zb(2).remove(s),i.stopPropagation()})),g.Lb(13,"icon",19),g.Pb(),g.Pb(),g.Pb(),g.Nb()}if(2&t){const t=e.$implicit,i=g.Zb(2);g.xb(1),g.gc("ngClass",g.jc(15,A,!t.read)),g.xb(1),g.gc("ngClass",g.kc(17,P,g.bc(3,9,i.layout.xxs$),g.bc(4,11,i.layout.xxs$))),g.xb(3),g.gc("image",null==t.relatedUser?null:t.relatedUser.image)("tooltip",null==t.relatedUser?null:t.relatedUser.display)("icon",i.SvgIcon.Bell),g.xb(2),g.Ec(g.bc(8,13,t.date)),g.xb(3),g.Ec(t.message),g.xb(2),g.gc("tooltip",i.i18n.notification.actions.remove),g.xb(1),g.gc("icon",i.SvgIcon.Trash)}}function $(t,e){if(1&t&&(g.Qb(0,"table",11),g.Qb(1,"thead"),g.Lb(2,"th",12),g.Qb(3,"th"),g.Dc(4),g.Pb(),g.Qb(5,"th"),g.Dc(6),g.Pb(),g.Lb(7,"th",13),g.Pb(),g.Qb(8,"tbody"),g.Bc(9,L,14,20,"ng-container",14),g.ac(10,"async"),g.Pb(),g.Pb()),2&t){const t=g.Zb();var i;g.xb(4),g.Ec(t.i18n.general.date),g.xb(2),g.Ec(t.i18n.notification.message),g.xb(3),g.gc("ngForOf",null==(i=g.bc(10,3,t.results$))?null:i.results)}}let k=(()=>{class t extends c.a{constructor(t,e){super(t),this.notificationsService=e}ngOnInit(){super.ngOnInit(),this.data={},this.addSub(this.notificationsService.markAsViewed().pipe(Object(b.a)()).subscribe(()=>{const t=this.notification.notificationsStatus$,e=Object.assign({},t.value);e.lastViewDate=this.dataForFrontendHolder.now().toISOString(),e.newNotifications=0,t.next(e),this.addSub(this.notification.notificationsStatus$.pipe(Object(d.a)(1)).subscribe(()=>this.update()))})),this.addSub(this.results$.subscribe(t=>{const e=[],i=(t?t.results:null)||[];i.filter(t=>!t.read).length>0&&e.push(new r.c(o.a.Check2All,this.i18n.notification.actions.markAllRead,()=>this.markAllRead())),i.length>0&&e.push(new r.c(o.a.Trash,this.i18n.notification.actions.removeAll,()=>this.removeAll())),this.headingActions=e}))}rowClick(t){this.addSub(this.notificationsService.markNotificationsAsRead({ids:[t.id]}).subscribe());const e=this.path(t);e&&this.router.navigateByUrl(e)}remove(t){this.addSub(this.notificationsService.deleteNotification({id:t.id}).subscribe(()=>this.update()))}path(t){return l.a.notificationPath(t)}markAllRead(){this.addSub(this.notificationsService.markNotificationsAsRead({ids:this.ids}).subscribe(()=>this.update()))}removeAll(){const t=[];for(const e of this.ids)t.push(this.notificationsService.deleteNotification({id:e}));this.addSub(Object(h.a)(t).pipe(Object(b.a)()).subscribe(()=>this.update()))}get ids(){return this.results&&this.results.results?this.results.results.map(t=>t.id):[]}getFormControlNames(){return["onlyUnread"]}toSearchParams(t){return t}doSearch(t){return this.notificationsService.searchNotifications$Response(t)}get onClick(){return t=>this.rowClick(t)}resolveMenu(){return u.b.NOTIFICATIONS}}return t.\u0275fac=function(e){return new(e||t)(g.Kb(g.r),g.Kb(a.a))},t.\u0275cmp=g.Eb({type:t,selectors:[["search-notifications"]],features:[g.ub],decls:11,vars:12,consts:[["mode","filters",3,"heading","mobileHeading","headingActions"],[1,"filters-form","filters-form-separator",3,"formGroup"],[1,"row"],[1,"col-12"],["formControlName","onlyUnread",3,"label"],["resultType","list",3,"results","onClick","rendering$","update"],[3,"avatarImage","avatarIcon",4,"mobileResult"],["class","table table-hover cursor-pointer",4,"resultTable"],[3,"avatarImage","avatarIcon"],[1,"cell-main",3,"tooltip"],[1,"cell-cell-date",3,"tooltip"],[1,"table","table-hover","cursor-pointer"],[1,"avatar"],[1,"actions"],[4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"avatar",3,"ngClass"],[3,"image","tooltip","icon"],[1,"btn","btn-icon",3,"tooltip","click"],[3,"icon"]],template:function(t,e){1&t&&(g.Qb(0,"page-layout"),g.Qb(1,"page-content",0),g.ac(2,"async"),g.Qb(3,"form",1),g.Qb(4,"div",2),g.Qb(5,"div",3),g.Lb(6,"boolean-field",4),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Qb(7,"results-layout",5),g.Xb("update",(function(t){return e.update(t)})),g.ac(8,"async"),g.Bc(9,O,6,8,"mobile-result",6),g.Bc(10,$,11,5,"table",7),g.Pb(),g.Pb()),2&t&&(g.xb(1),g.gc("heading",e.i18n.notification.title)("mobileHeading",e.i18n.notification.mobileTitle)("headingActions",g.bc(2,8,e.headingActions$)),g.xb(2),g.gc("formGroup",e.form),g.xb(3),g.gc("label",e.i18n.notification.onlyUnread),g.xb(1),g.gc("results",g.bc(8,10,e.results$))("onClick",e.onClick)("rendering$",e.rendering$))},directives:[p.a,f.a,m.H,m.v,m.n,v.a,m.u,m.l,T.a,y.a,F.a,w.a,I.b,x.s,x.q,S.a,C.a],pipes:[x.b,R.a],encapsulation:2,changeDetection:0}),t})();var Q=i("uuU0"),E=i("AytR"),N=i("wR2l"),U=i("chz4"),M=i("WYBn"),V=i("UXR7"),j=i("OTwK");function B(t,e){if(1&t&&g.Lb(0,"radio-group-field",5),2&t){const t=g.Zb(2);g.gc("label",t.i18n.setting.locale)("formControl",t.localeControl)("fieldOptions",t.localeOptions)}}function D(t,e){if(1&t&&g.Lb(0,"single-selection-field",5),2&t){const t=g.Zb(2);g.gc("label",t.i18n.setting.locale)("formControl",t.localeControl)("fieldOptions",t.localeOptions)}}function H(t,e){if(1&t&&(g.Ob(0),g.Bc(1,B,1,3,"radio-group-field",4),g.Bc(2,D,1,3,"single-selection-field",4),g.Nb()),2&t){const t=g.Zb();g.xb(1),g.gc("ngIf",t.localeOptions.length<=3),g.xb(1),g.gc("ngIf",t.localeOptions.length>3)}}function K(t,e){if(1&t){const t=g.Rb();g.Qb(0,"actions"),g.Lb(1,"span"),g.Qb(2,"action-button",6),g.Xb("action",(function(){return g.sc(t),g.Zb().switchFrontend()})),g.Pb(),g.Pb()}if(2&t){const t=g.Zb();g.xb(2),g.gc("label",t.i18n.setting.useClassicFrontend)}}const Z=[{path:"",children:[{path:"notifications",component:k,canActivate:[n.a],data:{menu:u.b.NOTIFICATIONS}},{path:"settings",component:(()=>{class t extends Q.a{constructor(t){super(t)}ngOnInit(){super.ngOnInit(),this.data=!0}onDataInitialized(){var t;this.darkThemeControl=new m.j(this.layout.darkTheme),this.addSub(this.darkThemeControl.valueChanges.subscribe(t=>{this.layout.darkTheme=t}));const e=this.dataForFrontendHolder.dataForFrontend.dataForUi,i=e.allowedLocales;i.length>1&&(this.localeControl=new m.j(null===(t=e.currentLocale)||void 0===t?void 0:t.code),this.localeOptions=i.map(t=>({value:t.code,text:t.name})),this.addSub(this.localeControl.valueChanges.subscribe(t=>this.authHelper.setLocale(t)))),this.canSwitchFrontend=!E.a.standalone&&this.dataForFrontendHolder.dataForFrontend.allowFrontendSwitching}switchFrontend(){this.dataForFrontendHolder.useClassicFrontend()}resolveMenu(){return u.b.SETTINGS}}return t.\u0275fac=function(e){return new(e||t)(g.Kb(g.r))},t.\u0275cmp=g.Eb({type:t,selectors:[["manage-settings"]],features:[g.ub],decls:7,vars:10,consts:[["last","",3,"heading","mobileHeading"],[3,"label","formControl"],[3,"value","text"],[4,"ngIf"],[3,"label","formControl","fieldOptions",4,"ngIf"],[3,"label","formControl","fieldOptions"],["outline","",3,"label","action"]],template:function(t,e){1&t&&(g.Qb(0,"page-layout"),g.Qb(1,"page-content",0),g.Qb(2,"radio-group-field",1),g.Lb(3,"field-option",2),g.Lb(4,"field-option",2),g.Pb(),g.Bc(5,H,3,2,"ng-container",3),g.Bc(6,K,3,1,"actions",3),g.Pb(),g.Pb()),2&t&&(g.xb(1),g.gc("heading",e.i18n.setting.title)("mobileHeading",e.i18n.setting.mobileTitle),g.xb(1),g.gc("label",e.i18n.setting.theme)("formControl",e.darkThemeControl),g.xb(1),g.gc("value",!1)("text",e.i18n.setting.themeLight),g.xb(1),g.gc("value",!0)("text",e.i18n.setting.themeDark),g.xb(1),g.gc("ngIf",e.localeControl),g.xb(1),g.gc("ngIf",e.canSwitchFrontend))},directives:[p.a,f.a,N.a,m.u,m.k,U.a,x.t,M.a,V.a,j.a],encapsulation:2,changeDetection:0}),t})(),canActivate:[n.a],data:{menu:u.b.SETTINGS}}]}];let z=(()=>{class t{}return t.\u0275mod=g.Ib({type:t}),t.\u0275inj=g.Hb({factory:function(e){return new(e||t)},imports:[[s.i.forChild(Z)],s.i]}),t})();var G=i("Se2V");let X=(()=>{class t{}return t.\u0275mod=g.Ib({type:t}),t.\u0275inj=g.Hb({factory:function(e){return new(e||t)},imports:[[z,G.a]]}),t})()},v4xg:function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var s=i("3Pt+"),n=i("mwYl"),a=i("tAww"),o=i("rCAV"),r=i("uuU0"),l=i("Ky6R"),c=i("TFmz"),u=i("Muja"),h=i("2Vo4"),b=i("Kj3r"),d=i("xdKd"),g=i("fXoL");let p=(()=>{class t extends r.a{constructor(t){super(t),this.ResultType=c.a,this.resultType$=new h.a(null),this.resultTypeControl=new s.j(null),this.results$=new h.a(null),this.allowedResultTypes$=new h.a([c.a.LIST]),this.rendering$=new h.a(!1),this.moreFilters$=new h.a(!1),this.ignoreNextUpdate=!1,this.nextRequestState=t.get(n.a);const e={page:0};e.resultType=this.getInitialResultType();for(const i of this.getFormControlNames()||[])e[i]=null;this.form=this.formBuilder.group(e)}getInitialFormValue(t){return t.query||{}}onDataInitialized(t){this.form.patchValue(this.getInitialFormValue(t)),this.stateManager.manage(this.form),this.stateManager.manage(this.resultTypeControl,"resultType"),this.stateManager.manageValue(this.moreFilters$,"moreFilters"),this.previousValue=this.form.value,this.previousResultType=this.resultType,this.resultType$.next(this.previousResultType),this.addSub(this.resultTypeControl.valueChanges.subscribe(t=>{const e=this.previousResultType;this.previousResultType=t,this.resultType$.next(t),this.shouldUpdateOnResultTypeChange(t,e)&&this.update(),null!=e&&e===t||(this.rendering=!0,this.stateManager.set("resultType",t),this.onResultTypeChanged(t,e))})),setTimeout(()=>{this.addSub(this.form.valueChanges.pipe(Object(b.a)(o.a.DEBOUNCE_TIME)).subscribe(t=>{this.shouldUpdateOnChange(t)&&this.update(),this.previousValue=t}),!0),this.previousResultType!==c.a.CATEGORIES&&this.update()},1)}shouldUpdateOnResultTypeChange(t,e){return t!==c.a.CATEGORIES&&([c.a.LIST,c.a.TILES].includes(e)!==[c.a.LIST,c.a.TILES].includes(t)||e===c.a.MAP!=(t===c.a.MAP))}shouldUpdateOnChange(t){return!Object(u.a)(this.previousValue,t)}get results(){return this.results$.value}set results(t){this.onBeforeRender(t),this.results$.next(t)}onBeforeRender(t){}get rendering(){return this.rendering$.value}set rendering(t){this.rendering$.next(t)}get allowedResultTypes(){return this.allowedResultTypes$.value}set allowedResultTypes(t){this.allowedResultTypes$.next(t)}get moreFilters(){return this.moreFilters$.value}set moreFilters(t){this.moreFilters$.next(t)}get pageData(){const t=this.form.value;return{page:t.page,pageSize:t.pageSize}}set pageData(t){this.form.patchValue(t)}get resultType(){return this.resultTypeControl.value}set resultType(t){null==t&&(t=this.getInitialResultType()),this.resultTypeControl.setValue(t)}ngOnInit(){super.ngOnInit(),this.resultType=this.getInitialResultType()}get moreFiltersAction(){return this._moreFiltersAction||(this._moreFiltersAction=new a.c(this.showMoreFiltersIcon(),this.showMoreFiltersLabel(),()=>{this.moreFilters=!this.moreFilters,this._moreFiltersAction.icon=this.moreFilters?this.showLessFiltersIcon():this.showMoreFiltersIcon(),this._moreFiltersAction.label=this.moreFilters?this.showLessFiltersLabel():this.showMoreFiltersLabel()},!0),this._moreFiltersAction.breakpoint="gt-xxs",this._moreFiltersAction.maybeRoot=!0),this._moreFiltersAction}showMoreFiltersLabel(){return this.i18n.general.showMoreFilters}showLessFiltersLabel(){return this.i18n.general.showLessFilters}showMoreFiltersIcon(){return d.a.Funnel}showLessFiltersIcon(){return d.a.Funnel}onResultTypeChanged(t,e){}getInitialResultType(){return c.a.LIST}update(t){if(this.ignoreNextUpdate)return;t&&(this.form.patchValue(t,{emitEvent:!1}),this.stateManager.set("form",this.form.value)),this.rendering=!0,this.results=null,this.nextRequestState.leaveNotification=!0;const e=this.form.value;e.pageSize=this.uiLayout.searchPageSize,this.addSub(this.doSearch(this.toSearchParams(e)).subscribe(t=>{this.resultType===c.a.CATEGORIES&&(this.resultType=this.allowedResultTypes.find(t=>t!==c.a.CATEGORIES)),this.results=l.a.from(t)}))}resetPage(t=!1){this.form.patchValue({page:0},{emitEvent:t})}doIgnoringUpdate(t){this.ignoreNextUpdate=!0;try{t()}finally{this.ignoreNextUpdate=!1}}}return t.\u0275fac=function(e){return new(e||t)(g.Kb(g.r))},t.\u0275dir=g.Fb({type:t,features:[g.ub]}),t})()}}]);